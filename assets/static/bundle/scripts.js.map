{"version":3,"sources":["../../../assets/interactor.js","../../../assets/js/auth.js","../../../assets/js/cart.js","../../../assets/js/collection.js","../../../assets/js/directives.js","../../../assets/js/filtres.js","../../../assets/js/inventory.js","../../../assets/js/list.js","../../../assets/js/main.js","../../../assets/js/order.js","../../../assets/js/permission.js","../../../assets/js/product-compare.js","../../../assets/js/product-list.js","../../../assets/js/product.js","../../../assets/js/quote-request.js","../../../assets/js/recommendations.js","../../../assets/js/searchBar.js","../../../assets/js/services.js","../../../assets/js/common-components/address.js","../../../assets/js/common-components/creditCard.js","../../../assets/js/common-components/dropdown-close.js","../../../assets/js/common-components/errors.js","../../../assets/js/common-components/labeled-input.js","../../../assets/js/common-components/labeled-select.js","../../../assets/js/common-components/labeled-textarea.js","../../../assets/js/common-components/lineItems.js","../../../assets/js/common-components/member.js","../../../assets/js/common-components/memberDetail.js","../../../assets/js/common-components/paymentMethods.js","../../../assets/js/common-components/roles.js","../../../assets/js/common-components/toggle-on-hover.js","../../../assets/js/common-components/totals.js","../../../assets/js/account/$account.js","../../../assets/js/account/account-addresses.js","../../../assets/js/account/account-company-info.js","../../../assets/js/account/account-company-members.js","../../../assets/js/account/account-lists.js","../../../assets/js/account/account-login.js","../../../assets/js/account/account-orders.js","../../../assets/js/account/account-password-change.js","../../../assets/js/account/account-profile-update.js","../../../assets/js/account/account-quotes.js","../../../assets/js/account/account-register.js","../../../assets/js/account/account-subscriptions.js","../../../assets/js/account/accountApi.js","../../../assets/js/account/corporateAccountApi.js"],"names":["Interactor","config","this","__init__","prototype","interactor","interactions","interactionElements","Array","isArray","interactionEvents","endpoint","async","debug","records","session","loadTime","Date","__initializeSession__","__bindEvents__","i","length","ev","elIndex","className","targets","document","getElementsByClassName","j","targetElement","interationArg","getAttributeNode","eventListener","content","value","handleEvent","e","stopPropagation","__addInteraction__","removeEventListener","addEventListener","window","onbeforeunload","__sendInteractions__","type","arg","interaction","event","targetTag","target","nodeName","targetClasses","clientPosition","x","clientX","y","clientY","screenPosition","screenX","screenY","createdAt","push","__closeSession__","console","log","unloadTime","language","navigator","platform","port","location","clientStart","name","appVersion","innerWidth","innerHeight","outerWidth","outerHeight","page","pathname","href","origin","title","clientEnd","xhr","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","angular","module","factory","mainContext","$auth","$httpParamSerializerJQLike","$interpolate","$rootScope","corporateAccountApi","changeAuth","results","authContext","userId","id","roles","permissions","userLogin","userName","fullName","isAuthenticated","userType","isAdministrator","_","map","login","password","grant_type","headers","Accept","Content-Type","fillAuthData","getUser","customer","result","$broadcast","error","checkPermission","permission","securityScopes","hasPermission","trim","$","inArray","split","some","permissionWithScope","constant","$authProvider","$provide","apiBaseUrl","loginUrl","tokenName","tokenPrefix","oauth2","clientId","decorator","$delegate","tokenExpirationName","service","originalSetToken","setToken","response","apply","arguments","expirationTime","parse","data","SatellizerStorage","set","run","$authStorage","$timeout","$window","$location","logOut","logout","remove","protocol","host","parseFloat","get","now","storefrontApp","controller","$scope","cartService","catalogService","getCart","cartIsUpdating","then","cart","hasValidationErrors","validationErrors","items","item","timer","setCartForm","form","formCart","changeLineItemQuantity","lineItemId","quantity","lineItem","find","$invalid","initialQuantity","cancel","changeLineItemPrice","newPrice","initialItems","removeLineItem","copy","recentCartItemModalVisible","without","submitCart","$setSubmitted","hasPhysicalProducts","outerRedirect","baseUrl","searchProduct","productSearchResult","productSkuOrName","productSearchProcessing","criteria","keyword","start","pageSize","search","products","selectSearchedProduct","product","selectedSearchedProduct","addProductToCart","addLineItem","getCartItemsCount","cartItemsCount","$on","$uibModalInstance","dialogData","close","redirect","url","$ctrl","sortModes","manual","best-selling","title-ascending","title-descending","price-ascending","price-descending","createddate-descending","createddate-ascending","view","generatePageSizes","capacity","steps","page_size","pageSizes","range","directive","$compile","marketingService","restrict","link","scope","element","attrs","getDynamicContent","html","replace","ctrl","onKeyPress","keyCode","click","on","off","require","$parse","$httpParamSerializer","compile","tElem","tAttr","xlinkHref","stringToObject","str","pairStrs","each","pairStr","pair","key","values","objectToString","obj","Object","keys","join","toLowerCase","toString","call","prop","queryType","$watch","vcQuery","query","extend","queryValues","URL","absUrl","attr","errorHandler","fallbackSrc","filter","input","extention","pop","suffix","dialogService","fulfillmentCenterService","selectFulfillmentCenter","showDialog","searchFulfillmentCenters","searchPhrase","fulfillmentCenters","listService","$translate","availableLists","selectedList","inProgress","itemAdded","addProductToList","selectList","list","initialize","lists","forEach","titleKey","descriptionKey","translations","description","translationIds","contains","customerService","currentPath","$$path","storefrontNotification","detailsVisible","toggleNotificationDetails","closeNotification","innerRedirect","path","stringifyAddress","address","stringifiedAddress","firstName","lastName","organization","countryName","regionName","city","line1","line2","postalCode","getObjectSize","size","hasOwnProperty","getCustomer","getCurrentCustomer","addressId","addresses","isContact","memberType","orderService","orderNumber","getOrder","order","authService","toggleVisibilityBasedOnPermission","permissionValue","show","hide","vaPermission","$localStorage","formatNumber","number","float","isNaN","isInProductCompareList","productId","p","addProductToCompareList","preventDefault","existingProduct","productCompareListCapacity","capacityExceeded","getProduct","properties","property","valueType","getProductProperties","grouped","flatten","propertyDisplayNames","uniq","displayName","props","where","productProperty","hasValues","onlyDifferences","uniqueValues","clearCompareList","removeProduct","itemsCount","pricingService","loaded","prices","getActualProductPrices","productList","object","price","quoteRequestService","toDialogDataModel","toDialogDataModelMock","rejection","dialogDataModel","errorMessage","message","errors","modelState","getFlatternDistinctPropertiesMap","variations","retVal","variation","propertyMap","getVariationPropertyMap","union","groupBy","variationProperties","getSelectedPropsMap","variationPropsMap","selected","comparePropertyMaps","propMap1","propMap2","every","findVariationBySelectedProps","selectedPropMap","compareProductInLists","buttonInvalid","listNames","listName","allVariations","selectedVariation","allVariationPropsMap","productPrice","productPriceLoaded","addProductsToCartMock","Test","imageUrl","actualPrice","formattedAmount","actualPriceWithTax","listPrice","listPriceWithTax","extendedPrice","extendedPriceWithTax","addProductToCartById","addProductToWishlist","addProductToActualQuoteRequest","addProductToQuoteRequest","checkProperty","productIds","concat","getQuoteRequest","quoteRequest","billingAddress","countryCode","getCountryRegions","quoteItem","proposalPrices","tierPrice","selectedTierPrice","requestShippingQuote","getCountries","countries","addressType","countryRegions","billingCountryRegions","shippingCountryRegions","toFormModel","quoteRequestFormModel","tag","status","comment","shippingAddress","quoteItemFormModel","amount","quoteRequestNumber","currentQuoteRequestNumber","billingCountry","shippingCountry","setQuoteRequestForm","formQuoteRequest","displayForStatuses","statuses","addTierPrice","salePrice","changeTierPriceQuantity","removeTierPrice","removeProductFromQuoteRequest","initialQuoteItems","setCountry","country","c","code3","code2","regionId","setCountryRegion","countryRegion","r","code","selectCustomerAddress","a","submitQuoteRequest","email","isRegisteredUser","rejectQuoteRequest","selectTierPrice","getTotals","totals","confirmQuoteRequest","setRequestShippingQuote","setShippingAddressEqualsBilling","shippingAddressEqualsBilling","tierPricesUnique","quantities","getCurrentQuoteRequest","actualQuoteRequest","updated","recommendationService","isBlockVisible","productListRecommendationsLoaded","productListRecommendations","getRecommendations","evalContext","isString","match","getRecommendedProducts","startRecordInteraction","searchQuery","getSuggestions","searching","categorySuggestions","productSuggestions","searchCriteria","skip","take","suggestionsLimit","searchCategories","categories","first","$uibModal","templateUrl","resolve","$http","postFeedback","post","model","getTime","placeName","put","delete","clearCart","addCoupon","couponCode","removeCoupon","addOrUpdateShipment","shipment","addOrUpdatePayment","payment","getAvailableShippingMethods","shipmentId","getAvailablePaymentMethods","addOrUpdatePaymentPlan","plan","removePaymentPlan","createOrder","bankCardInfo","getWishlist","getQuoteRequestItemsCount","quoteItemId","quoteForm","updateQuoteRequest","requestData","component","bindings","validationContainer","editMode","onUpdate","checkoutStep","populateRegionalDataForAddress","findWhere","regions","setAddressRegion","region","undefined","types","$onInit","addComponent","$onDestroy","removeComponent","setForm","frm","validate","$valid","card","$filter","val","bankCardHolderName","ctrls","dropdownCtrl","closeDropdown","hasClass","disabled","$apply","toggle","level","placeholder","required","requiredError","autofocus","ngModel","options","select","$setValidity","$render","$viewValue","option","$setViewValue","label","pattern","member","memberComponent","fieldsConfig","getFieldConfig","field","configItem","visible","rolesComponent","showField","disableField","requiredField","elem","$parsers","unshift","isValid","$$parentForm","Password","getAvailPaymentMethods","onSelectMethod","paymentMethod","methods","availPaymentMethods","sortBy","priority","selectMethod","method","accounts","roleService","loader","available","availableRoles","availableRole","getRole","$onChanges","selectRole","role","assigned","autoClose","dropdownToggleCtrl","addClass","openDropdown","moduleName","storefrontAppDependencies","$translateProvider","useSanitizeValueStrategy","useUrlLoader","BASE_URL","preferredLanguage","$templateCache","$routeConfig","useAsDefault","accountApi","getQuotes","pageNumber","sortInfos","callback","wrapLoading","$promise","updateProfile","updateRequest","updateAccount","updateAddresses","availCountries","changePassword","changePasswordData","getCompanyMember","companyId","organizations","emails","parent","prev","$q","confirm","when","isLoading","func","accountManager","confirmService","corporateApiErrorHelper","currentMember","addNewAddress","last","components","newAddress","updateCompanyMember","submit","editIdx","editItem","edit","$index","text","confirmed","splice","companyMember","handler","clearErrors","getCompanyById","company","updateCompanyInfo","updateCompany","handleErrors","submitCompanyAddress","$router","corporateRegisterApi","currentMemberId","newMemberComponent","pageSettings","currentPage","itemsPerPageCount","numPages","pageChanged","getCompanyMembers","memberId","entries","totalItems","totalCount","securityAccounts","addNewMemberFieldsConfig","init","storeId","cultureName","registrationUrl","$routerOnActivate","next","params","inviteEmailsValidationPattern","RegExp","invite","inviteInfo","rawEmails","adminName","adminEmail","callbackUrl","addNewMember","newMember","registerMember","changeStatus","isActive","navigate","deleteCompanyMember","ids","inviteForm","valid","showActions","refresh","memberNumber","submitMember","all","addToCart","productAdded","$event","querySelector","orderHelper","orderApi","isShowPayment","lastPayment","inPayments","amountToPay","getNewPayment","sum","billingAddressEqualsShipping","loadPromise","getNewPaymentData","configurePayment","paymentMethods","newPaymentTemplate","purpose","canCancelPayment","selectPaymentMethod","gatewayCode","shipments","getInvoicePdf","showPayment","preselectedMaymentMethod","processPayment","paymentNumber","orderProcessingResult","isSuccess","newPaymentStatus","paymentMethodType","htmlForm","redirectUrl","cancelPayment","paidPayments","paidAmount","reduce","memo","num","total","pendingPayments","isCancelled","pendingPayment","found","statusLabels","passwordChangeData","errorMsg","hasError","oldPassword","newPassword","newPassword2","$setPristine","getParams","param","substring","decodeURIComponent","registerMemberFieldsConfig","complete","getRegisterInfoByInvite","reject","companyName","register","registerByInvite","subscriptionApi","entryNumber","subscription","cancelReason","isCancelFormVisible","data_intervalCount","interval","$resource","updateUser","getRoles"],"mappings":"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","file":"scripts.js","sourcesContent":["/*\r\nBSD 2-Clause License\r\n\r\nCopyright (c) 2016, Benjamin Cordier\r\nAll rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without\r\nmodification, are permitted provided that the following conditions are met:\r\n\r\n* Redistributions of source code must retain the above copyright notice, this\r\n  list of conditions and the following disclaimer.\r\n\r\n* Redistributions in binary form must reproduce the above copyright notice,\r\n  this list of conditions and the following disclaimer in the documentation\r\n  and/or other materials provided with the distribution.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\nvar Interactor = function (config) {\r\n    // Call Initialization on Interactor Call\r\n    this.__init__(config);\r\n};\r\n\r\nInteractor.prototype = {\r\n\r\n    // Initialization\r\n    __init__: function (config) {\r\n\r\n        var interactor = this;\r\n        \r\n        // Argument Assignment          // Type Checks                                                                          // Default Values\r\n        interactor.interactions = typeof (config.interactions) == \"boolean\" ? config.interactions : true,\r\n        interactor.interactionElements = Array.isArray(config.interactionElements) === true ? config.interactionElements : ['interaction'],\r\n        interactor.interactionEvents = Array.isArray(config.interactionEvents) === true ? config.interactionEvents : ['mouseup', 'touchend'],     \r\n        interactor.endpoint = typeof (config.endpoint) == \"string\" ? config.endpoint : '/interactions',\r\n        interactor.async = typeof (config.async) == \"boolean\" ? config.async : true,\r\n        interactor.debug = typeof (config.debug) == \"boolean\" ? config.debug : true,\r\n        interactor.records = [],\r\n        interactor.session = {},\r\n        interactor.loadTime = new Date();\r\n\r\n        // Initialize Session\r\n        interactor.__initializeSession__();\r\n        // Call Event Binding Method\r\n        interactor.__bindEvents__();\r\n\r\n        return interactor;\r\n    },\r\n\r\n    // Create Events to Track\r\n    __bindEvents__: function () {\r\n\r\n        var interactor = this;\r\n\r\n        // Set Interaction Capture\r\n        if (interactor.interactions === true) {\r\n            for (var i = 0; i < interactor.interactionEvents.length; i++) {\r\n                var ev = interactor.interactionEvents[i];\r\n                for (var elIndex = 0; elIndex < interactor.interactionElements.length; elIndex++) {\r\n                    var className = interactor.interactionElements[elIndex];\r\n                    var targets = document.getElementsByClassName(className);\r\n                    if (targets) {\r\n                        for (var j = 0; j < targets.length; j++) {\r\n                            var targetElement = targets[j];\r\n                            var interationArg = targetElement.getAttributeNode(\"interactor-arg\");\r\n                            var eventListener =  {\r\n                                className: className,\r\n                                content:  interationArg ? interationArg.value : \"\",\r\n                                handleEvent : function(e) {\r\n                                    e.stopPropagation();\r\n                                    interactor.__addInteraction__(e, this.className, this.content);\r\n                                }\r\n                            };\r\n                            targets[j].removeEventListener(ev, eventListener);\r\n                            targets[j].addEventListener(ev, eventListener);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Bind onbeforeunload Event\r\n        window.onbeforeunload = function (e) {\r\n            interactor.__sendInteractions__();\r\n        };\r\n\r\n        return interactor;\r\n    },\r\n\r\n    // Add Interaction Object Triggered By Events to Records Array\r\n    __addInteraction__: function (e, type, arg) {\r\n\r\n\r\n        var interactor = this,\r\n\r\n            // Interaction Object\r\n            interaction = {\r\n                type: type,\r\n                event: e.type,\r\n                targetTag: e.target.nodeName,\r\n                targetClasses: e.target.className,\r\n                content: arg,//e.target.innerText,\r\n                clientPosition: {\r\n                    x: e.clientX,\r\n                    y: e.clientY\r\n                },\r\n                screenPosition: {\r\n                    x: e.screenX,\r\n                    y: e.screenY\r\n                },\r\n                createdAt: new Date()\r\n            };\r\n\r\n        // Insert into Records Array\r\n        interactor.records.push(interaction);\r\n\r\n        // Log Interaction if Debugging\r\n        if (interactor.debug) {\r\n            // Close Session & Log to Console\r\n            interactor.__closeSession__();\r\n            console.log(\"Session:\\n\", interactor.session);\r\n        }\r\n\r\n        return interactor;\r\n    },\r\n\r\n    // Generate Session Object & Assign to Session Property\r\n    __initializeSession__: function () {\r\n        var interactor = this;\r\n\r\n        // Assign Session Property\r\n        interactor.session = {\r\n            loadTime: interactor.loadTime,\r\n            unloadTime: new Date(),\r\n            language: window.navigator.language,\r\n            platform: window.navigator.platform,\r\n            port: window.location.port,\r\n            clientStart: {\r\n                name: window.navigator.appVersion,\r\n                innerWidth: window.innerWidth,\r\n                innerHeight: window.innerHeight,\r\n                outerWidth: window.outerWidth,\r\n                outerHeight: window.outerHeight\r\n            },\r\n            page: {\r\n                location: window.location.pathname,\r\n                href: window.location.href,\r\n                origin: window.location.origin,\r\n                title: document.title\r\n            },\r\n            endpoint: interactor.endpoint\r\n        };\r\n\r\n        return interactor;\r\n    },\r\n\r\n    // Insert End of Session Values into Session Property\r\n    __closeSession__: function () {\r\n\r\n        var interactor = this;\r\n\r\n        // Assign Session Properties\r\n        interactor.session.unloadTime = new Date();\r\n        interactor.session.interactions = interactor.records;\r\n        interactor.session.clientEnd = {\r\n            name: window.navigator.appVersion,\r\n            innerWidth: window.innerWidth,\r\n            innerHeight: window.innerHeight,\r\n            outerWidth: window.outerWidth,\r\n            outerHeight: window.outerHeight\r\n        };\r\n\r\n        return interactor;\r\n    },\r\n\r\n\r\n    // Gather Additional Data and Send Interaction(s) to Server\r\n    __sendInteractions__: function () {\r\n\r\n        var interactor = this,\r\n            // Initialize Cross Header Request\r\n            xhr = new XMLHttpRequest();\r\n\r\n        // Close Session\r\n        interactor.__closeSession__();\r\n\r\n        // Post Session Data Serialized as JSON\r\n        xhr.open('POST', interactor.endpoint, interactor.async);\r\n        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\r\n        xhr.send(JSON.stringify(interactor.session));\r\n\r\n        return interactor;\r\n    }\r\n\r\n};","angular.module('storefrontApp')\r\n.factory('authService', ['storefrontApp.mainContext', '$auth', '$httpParamSerializerJQLike', '$interpolate', '$rootScope', 'storefront.corporateAccountApi',\r\n    function (mainContext, $auth, $httpParamSerializerJQLike, $interpolate, $rootScope, corporateAccountApi) {\r\n    \r\n    var authContext = {\r\n        userId: null,\r\n        userLogin: null,\r\n        fullName: null,\r\n        userType: null,\r\n        roles: null,\r\n        permissions: null,\r\n        isAuthenticated: false\r\n    };\r\n\r\n    authContext.login = function (login, password) {\r\n        return $auth.login($httpParamSerializerJQLike({\r\n                userName: login,\r\n                password: password,\r\n                grant_type: \"password\"\r\n            }),\r\n            { headers: { 'Accept': 'application/json', 'Content-Type': 'application/x-www-form-urlencoded' }\r\n        });\r\n    };\r\n\r\n    authContext.fillAuthData = function () {\r\n        return corporateAccountApi.getUser({ userName: mainContext.customer.userName },\r\n            function (result) {\r\n                changeAuth(result)\r\n                $rootScope.$broadcast('loginStatusChanged', authContext);\r\n            },\r\n            function (error) { });\r\n    };\r\n\r\n    authContext.checkPermission = function (permission, securityScopes) {\r\n        //first check admin permission\r\n        // var hasPermission = $.inArray('admin', authContext.permissions) > -1;\r\n        var hasPermission = authContext.isAdministrator;\r\n        if (!hasPermission && permission) {\r\n            permission = permission.trim();\r\n            //first check global permissions\r\n            hasPermission = $.inArray(permission, authContext.permissions) > -1;\r\n            if (!hasPermission && securityScopes) {\r\n                if (typeof securityScopes === 'string' || angular.isArray(securityScopes)) {\r\n                    securityScopes = angular.isArray(securityScopes) ? securityScopes : securityScopes.split(',');\r\n                    //Check permissions in scope\r\n                    hasPermission = _.some(securityScopes, function (x) {\r\n                        var permissionWithScope = permission + \":\" + x;\r\n                        var retVal = $.inArray(permissionWithScope, authContext.permissions) > -1;\r\n                        //console.log(permissionWithScope + \"=\" + retVal);\r\n                        return retVal;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return hasPermission;\r\n    };\r\n\r\n    function changeAuth(results) {\r\n        authContext.userId = results.id;\r\n        authContext.roles = results.roles;\r\n        authContext.permissions = results.permissions;\r\n        authContext.userLogin = results.userName;\r\n        authContext.fullName = results.userLogin;\r\n        authContext.isAuthenticated = results.userName != null;\r\n        authContext.userType = results.userType;\r\n        authContext.isAdministrator = results.isAdministrator;\r\n        //Interpolate permissions to replace some template to real value\r\n        if (authContext.permissions) {\r\n            authContext.permissions = _.map(authContext.permissions, function (x) {\r\n                return $interpolate(x)(authContext);\r\n            });\r\n        }\r\n    };\r\n\r\n    return authContext;\r\n}])\r\n.constant('tokenExpirationName', 'platform_access_token_expiration_time')\r\n.config(['$authProvider', '$provide', 'apiBaseUrl', function($authProvider, $provide, apiBaseUrl) {\r\n    $authProvider.loginUrl = apiBaseUrl + 'Token';\r\n    $authProvider.tokenName = 'access_token';\r\n    $authProvider.tokenPrefix = 'platform';\r\n    $authProvider.oauth2({\r\n      name: 'platform',\r\n      clientId: 'web'\r\n    });\r\n    $provide.decorator('SatellizerShared', ['$delegate', 'tokenExpirationName', function($delegate, tokenExpirationName) {\r\n        var service = $delegate;\r\n        var originalSetToken = service.setToken;\r\n        service.setToken = function(response){\r\n            originalSetToken.apply(service, arguments);\r\n            var expirationTime = Date.parse(response.data['.expires']);\r\n            this.SatellizerStorage.set(tokenExpirationName, expirationTime);;\r\n        };\r\n        return service;\r\n    }]);\r\n}])\r\n.run(['$auth', 'SatellizerConfig', 'SatellizerStorage', 'tokenExpirationName', '$timeout', '$window', '$location', function($auth, $authProvider, $authStorage, tokenExpirationName, $timeout, $window, $location) {\r\n    var logOut = function(){\r\n        $auth.logout();\r\n        $authStorage.remove(tokenExpirationName);\r\n        $window.location.href = $location.protocol() + \"://\" + $location.host() + \":\" + $location.port() + '/account/logout';\r\n    };\r\n\r\n    if ($auth.isAuthenticated()){\r\n        $timeout(logOut, parseFloat($authStorage.get(tokenExpirationName)) - Date.now());\r\n    }\r\n}]);","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('cartController', ['$rootScope', '$scope', '$timeout', 'cartService', 'catalogService', function ($rootScope, $scope, $timeout, cartService, catalogService) {\r\n    var timer;\r\n\r\n    initialize();\r\n\r\n    $scope.setCartForm = function (form) {\r\n        $scope.formCart = form;\r\n    }\r\n\r\n    $scope.changeLineItemQuantity = function (lineItemId, quantity) {\r\n        var lineItem = _.find($scope.cart.items, function (i) { return i.id == lineItemId });\r\n        if (!lineItem || quantity < 1 || $scope.cartIsUpdating || $scope.formCart.$invalid) {\r\n            return;\r\n        }\r\n        var initialQuantity = lineItem.quantity;\r\n        lineItem.quantity = quantity;\r\n        $timeout.cancel(timer);\r\n        timer = $timeout(function () {\r\n            $scope.cartIsUpdating = true;\r\n            cartService.changeLineItemQuantity(lineItemId, quantity).then(function (response) {\r\n                getCart();\r\n                $rootScope.$broadcast('cartItemsChanged');\r\n            }, function (response) {\r\n                lineItem.quantity = initialQuantity;\r\n                $scope.cartIsUpdating = false;\r\n            });\r\n        }, 300);\r\n    }\r\n\r\n    $scope.changeLineItemPrice = function (lineItemId, newPrice) {\r\n    \tvar lineItem = _.find($scope.cart.items, function (i) { return i.id == lineItemId });\r\n    \tif (!lineItem || $scope.cartIsUpdating) {\r\n    \t\treturn;\r\n    \t}\r\n    \t$scope.cartIsUpdating = true;\r\n    \tcartService.changeLineItemPrice(lineItemId, newPrice).then(function (response) {\r\n    \t\tgetCart();\r\n    \t\t$rootScope.$broadcast('cartItemsChanged');\r\n    \t}, function (response) {\r\n    \t\t$scope.cart.items = initialItems;\r\n    \t\t$scope.cartIsUpdating = false;\r\n    \t});\r\n    };\r\n    $scope.removeLineItem = function (lineItemId) {\r\n        var lineItem = _.find($scope.cart.items, function (i) { return i.id == lineItemId });\r\n        if (!lineItem || $scope.cartIsUpdating) {\r\n            return;\r\n        }\r\n        $scope.cartIsUpdating = true;\r\n        var initialItems = angular.copy($scope.cart.items);\r\n        $scope.recentCartItemModalVisible = false;\r\n        $scope.cart.items = _.without($scope.cart.items, lineItem);\r\n        cartService.removeLineItem(lineItemId).then(function (response) {\r\n            getCart();\r\n            $rootScope.$broadcast('cartItemsChanged');\r\n        }, function (response) {\r\n            $scope.cart.items = initialItems;\r\n            $scope.cartIsUpdating = false;\r\n        });\r\n    }   \r\n\r\n    $scope.submitCart = function () {\r\n        $scope.formCart.$setSubmitted();\r\n        if ($scope.formCart.$invalid) {\r\n            return;\r\n        }\r\n        if ($scope.cart.hasPhysicalProducts) {\r\n            $scope.outerRedirect($scope.baseUrl + 'cart/checkout');\r\n        } else {\r\n            $scope.outerRedirect($scope.baseUrl + 'cart/checkout');\r\n        }\r\n    }\r\n\r\n    $scope.searchProduct = function () {\r\n        $scope.productSearchResult = null;\r\n        if ($scope.productSkuOrName) {\r\n            $timeout.cancel(timer);\r\n            timer = $timeout(function () {\r\n                $scope.productSearchProcessing = true;\r\n                var criteria = {\r\n                    keyword: $scope.productSkuOrName,\r\n                    start: 0,\r\n                    pageSize: 5\r\n                }\r\n                catalogService.search(criteria).then(function (response) {\r\n                    $scope.productSearchProcessing = false;\r\n                    $scope.productSearchResult = response.data.products;\r\n                }, function (response) {\r\n                    $scope.productSearchProcessing = false;\r\n                });\r\n            }, 300);\r\n        }\r\n    }\r\n\r\n    $scope.selectSearchedProduct = function (product) {\r\n        $scope.productSearchResult = null;\r\n        $scope.selectedSearchedProduct = product;\r\n        $scope.productSkuOrName = product.name;\r\n    }\r\n\r\n    $scope.addProductToCart = function (product, quantity) {\r\n        $scope.cartIsUpdating = true;\r\n        cartService.addLineItem(product.id, quantity).then(function (response) {\r\n            getCart();\r\n            $scope.productSkuOrName = null;\r\n            $scope.selectedSearchedProduct = null;\r\n            $rootScope.$broadcast('cartItemsChanged');\r\n        });\r\n    }\r\n\r\n    function initialize() {\r\n        getCart();\r\n    }\r\n\r\n    function getCart() {\r\n        $scope.cartIsUpdating = true;\r\n        cartService.getCart().then(function (response) {\r\n            var cart = response.data;\r\n            cart.hasValidationErrors = _.some(cart.validationErrors) || _.some(cart.items, function (item) { return _.some(item.validationErrors) });\r\n            $scope.cart = cart;\r\n            $scope.cartIsUpdating = false;\r\n        }, function (response) {\r\n            $scope.cartIsUpdating = false;\r\n        });\r\n    }\r\n}]);\r\n\r\nstorefrontApp.controller('cartBarController', ['$scope', 'cartService', function ($scope, cartService) {\r\n    getCartItemsCount();\r\n\r\n    $scope.$on('cartItemsChanged', function (event, data) {\r\n        getCartItemsCount();\r\n    });\r\n\r\n    function getCartItemsCount() {\r\n        cartService.getCartItemsCount().then(function (response) {\r\n            $scope.cartItemsCount = response.data;\r\n        });\r\n    }\r\n}]);\r\n\r\nstorefrontApp.controller('recentlyAddedCartItemDialogController', ['$scope', '$window', '$uibModalInstance', 'dialogData', function ($scope, $window, $uibModalInstance, dialogData) {\r\n    $scope.dialogData = dialogData;\r\n\r\n    $scope.close = function () {\r\n        $uibModalInstance.close();\r\n    }\r\n\r\n    $scope.redirect = function (url) {\r\n        $window.location = url;\r\n    }\r\n}]);\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('collectionController', ['$scope', '$location', function ($scope, $location) {\r\n    var $ctrl = this;\r\n    $ctrl.sortModes = {\r\n        'manual': 'collections.sorting.featured',\r\n        'best-selling': 'collections.sorting.best_selling',\r\n        'title-ascending': 'collections.sorting.az',\r\n        'title-descending': 'collections.sorting.za',\r\n        'price-ascending': 'collections.sorting.price_ascending',\r\n        'price-descending': 'collections.sorting.price_descending',\r\n        'createddate-descending': 'collections.sorting.date_descending',\r\n        'createddate-ascending': 'collections.sorting.date_ascending'\r\n    };\r\n    $ctrl.view = $location.search().view || 'grid';\r\n    $ctrl.generatePageSizes = function (capacity, steps) {\r\n        // for example            start: 16 stop: 16 * 3 + 1 = 49 step: 16\r\n        $ctrl.pageSize = $location.search().page_size || capacity;\r\n        $ctrl.pageSizes = _.range(capacity, capacity * steps + 1, capacity);\r\n    }\r\n    $ctrl.keyword = $location.search().keyword;\r\n}]);\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.directive('vcContentPlace', ['$compile', 'marketingService', function ($compile, marketingService) {\r\n    return {\r\n        restrict: 'E',\r\n        link: function (scope, element, attrs) {\r\n            marketingService.getDynamicContent(attrs.id).then(function (response) {\r\n                element.html($compile(response.data)(scope));\r\n            });\r\n        },\r\n        replace: true\r\n    }\r\n}]);\r\n\r\nstorefrontApp.directive('vcEnterSource', ['$timeout', function ($timeout) {\r\n    return {\r\n        restrict: \"A\",\r\n        controller: function() { },\r\n        link: function (scope, element, attrs, ctrl) {\r\n            var onKeyPress = function (event) {\r\n                if (event.keyCode === 13) { // Enter\r\n                    ctrl.element[0].click();\r\n                }\r\n            };\r\n            element.on('keypress', onKeyPress);\r\n            scope.$on('$destroy', function () {\r\n                element.off('keypress', onKeyPress);\r\n            });\r\n        }\r\n    };\r\n}]);\r\n\r\nstorefrontApp.directive('vcEnterTarget', [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"^vcEnterSource\",\r\n        link: function (scope, element, attrs, ctrl) {\r\n            ctrl.element = element;\r\n        }\r\n    };\r\n}]);\r\n\r\nstorefrontApp.directive('vcQuery', ['$parse', '$location', '$httpParamSerializer', function ($parse, $location, $httpParamSerializer) {\r\n    return {\r\n        restrict: \"A\",\r\n        compile: function (tElem, tAttr) {\r\n            if (!tAttr.href && !tAttr.xlinkHref) {\r\n                return function(scope, element, attrs) {\r\n                    // If the linked element is not an anchor tag anymore, do nothing\r\n                    if (element[0].nodeName.toLowerCase() !== 'a') return;\r\n\r\n                    // SVGAElement does not use the href attribute, but rather the 'xlinkHref' attribute.\r\n                    var href = toString.call(element.prop('href')) === '[object SVGAnimatedString]' ?\r\n                        'xlink:href' : 'href';\r\n                    var type = attrs.queryType || 'pair';\r\n\r\n                    function stringToObject(str) {\r\n                        var pairStrs = str.split(';');\r\n                        var result = {};\r\n                        _.each(pairStrs, function (pairStr) {\r\n                            var pair = pairStr.split(':');\r\n                            var key = pair[0];\r\n                            var values = pair[1].split(',');\r\n                            result[key] = values;\r\n                        });\r\n                        return result;\r\n                    }\r\n\r\n                    function objectToString(obj) {\r\n                        return Object.keys(obj).map(function(key) {\r\n                             return key + ':' + obj[key].join(',');\r\n                        }).join(';');\r\n                    }\r\n\r\n                    // get query from current url, replace query parts with specified parts and set href\r\n                    scope.$watch($parse(attrs.vcQuery), function (value) {\r\n                        var query = $location.search();\r\n                        if (type === 'pair') {\r\n                            query = angular.extend({ }, query, value);\r\n                        } else if (type === 'array') {\r\n                            _.each(Object.keys(value), function (key) {\r\n                                var queryValues = stringToObject(query[key]);\r\n                                angular.extend(queryValues, value[key]);\r\n                                queryValues = objectToString(queryValues);\r\n                                query[key] = queryValues;\r\n                            });\r\n                        }\r\n                        var url = new URL($location.absUrl());\r\n                        url.search = $httpParamSerializer(query);\r\n                        element.attr(href, url.href);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.directive('fallbackSrc', function () {\r\n    return {\r\n        link: function (scope, element, attrs) {\r\n            element.on('error', errorHandler);\r\n\r\n            scope.$on('$destroy', function() {\r\n                element.off('error', errorHandler);\r\n            });\r\n\r\n            function errorHandler(event) {\r\n                if (element.attr('src') !== attrs.fallbackSrc) {\r\n                    element.attr('src', attrs.fallbackSrc);\r\n                }\r\n                else {\r\n                    element.off(event);\r\n                }\r\n            };\r\n        }\r\n    }\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.filter('imgurl', function () {\r\n    return function (input, type) {\r\n        if (!type)\r\n            return input;\r\n\r\n        var extention = '.' + input.split('.').pop();\r\n        var suffix = \"_\" + type;\r\n        var result = input.replace(extention, suffix+extention);\r\n        return result;\r\n    };\r\n});","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('inventoryController', ['dialogService', 'fulfillmentCenterService', function (dialogService, fulfillmentCenterService) {\r\n    var $ctrl = this;\r\n\r\n    $ctrl.selectFulfillmentCenter = function() {\r\n        dialogService.showDialog(null, 'inventoryController', 'select-fulfillment-center-dialog.tpl');\r\n    };\r\n\r\n    $ctrl.searchFulfillmentCenters = function() {\r\n        fulfillmentCenterService.searchFulfillmentCenters({ searchPhrase: $ctrl.searchPhrase }).then(function(response) {\r\n            $ctrl.fulfillmentCenters = response.data.results;\r\n        });\r\n    };\r\n}]);\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('recentlyAddedListItemDialogController', ['$scope', '$window', '$uibModalInstance', 'dialogData', 'listService', '$translate', function ($scope, $window, $uibModalInstance, dialogData, listService, $translate) {\r\n    $scope.availableLists = [];\r\n    $scope.selectedList = {};\r\n    $scope.dialogData = dialogData;\r\n    $scope.inProgress = false;\r\n    $scope.itemAdded = false;\r\n\r\n    $scope.addProductToList = function () {\r\n        $scope.inProgress = true;\r\n        listService.addLineItem(dialogData.id, $scope.selectedList.name).then(function (response) {\r\n            if (response.data) {\r\n                $scope.inProgress = false;\r\n                $scope.itemAdded = true;\r\n            }\r\n        })\r\n    }\r\n    $scope.selectList = function (list) {\r\n        $scope.selectedList = list;\r\n    };\r\n\r\n    $scope.close = function () {\r\n        $uibModalInstance.close();\r\n    };\r\n    $scope.redirect = function (url) {\r\n        $window.location = url;\r\n    }\r\n\r\n    $scope.initialize = function (lists) {        \r\n        $scope.lists = lists;\r\n        angular.forEach($scope.lists, function (list) {\r\n            var titleKey = 'wishlist.general.' + list.name + '_list_title';\r\n            var descriptionKey = 'wishlist.general.' + list.name + '_list_description';\r\n            $translate([titleKey, descriptionKey]).then(function (translations) {\r\n                list.title = translations[titleKey];\r\n                list.description = translations[descriptionKey];\r\n            }, function (translationIds) {\r\n                list.title = translationIds[titleKey];\r\n                list.description = translationIds[descriptionKey];\r\n                });\r\n            listService.contains(dialogData.id, list.name).then(function (response) {\r\n                list.contains = response.data.contains;\r\n            });            \r\n        });\r\n      \r\n    };\r\n\r\n\r\n}]);","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('mainController', ['$rootScope', '$scope', '$location', '$window', 'customerService', 'storefrontApp.mainContext',\r\n    function ($rootScope, $scope, $location, $window, customerService, mainContext) {\r\n\r\n        //Base store url populated in layout and can be used for construction url inside controller\r\n        $scope.baseUrl = {};\r\n\r\n        $scope.$watch(function () {\r\n            $scope.currentPath = $location.$$path.replace('/', '');\r\n        });\r\n\r\n        $rootScope.$on('storefrontError', function (event, data) {\r\n            $rootScope.storefrontNotification = data;\r\n            $rootScope.storefrontNotification.detailsVisible = false;\r\n        });\r\n\r\n        $rootScope.toggleNotificationDetails = function () {\r\n            $rootScope.storefrontNotification.detailsVisible = !$rootScope.storefrontNotification.detailsVisible;\r\n        }\r\n\r\n        $rootScope.closeNotification = function () {\r\n            $rootScope.storefrontNotification = null;\r\n        }\r\n\r\n        //For outside app redirect (To reload the page after changing the URL, use the lower-level API)\r\n        $scope.outerRedirect = function (absUrl) {\r\n            $window.location.href = absUrl;\r\n        };\r\n\r\n        //change in the current URL or change the current URL in the browser (for app route)\r\n        $scope.innerRedirect = function (path) {\r\n            $location.path(path);\r\n            $scope.currentPath = $location.$$path.replace('/', '');\r\n        };\r\n\r\n        $scope.stringifyAddress = function (address) {\r\n            var stringifiedAddress = address.firstName + ' ' + address.lastName + ', ';\r\n            stringifiedAddress += address.organization ? address.organization + ', ' : '';\r\n            stringifiedAddress += address.countryName + ', ';\r\n            stringifiedAddress += address.regionName ? address.regionName + ', ' : '';\r\n            stringifiedAddress += address.city + ' ';\r\n            stringifiedAddress += address.line1 + ', ';\r\n            stringifiedAddress += address.line2 ? address.line2 : '';\r\n            stringifiedAddress += address.postalCode;\r\n            return stringifiedAddress;\r\n        }\r\n\r\n        $scope.getObjectSize = function (obj) {\r\n            var size = 0, key;\r\n            for (key in obj) {\r\n                if (obj.hasOwnProperty(key)) {\r\n                    size++;\r\n                }\r\n            }\r\n            return size;\r\n        }\r\n\r\n        mainContext.getCustomer = $scope.getCustomer = function () {\r\n            customerService.getCurrentCustomer().then(function (response) {\r\n                var addressId = 1;\r\n                _.each(response.data.addresses, function (address) {\r\n                    address.id = addressId;\r\n                    addressId++;\r\n                });\r\n                response.data.isContact = response.data.memberType === 'Contact';\r\n                mainContext.customer = $scope.customer = response.data;\r\n            });\r\n        };\r\n\r\n        $scope.getCustomer();\r\n    }])\r\n\r\n.factory('storefrontApp.mainContext', function () {\r\n    return {};\r\n});","var storefrontApp = angular.module('storefrontApp');\r\nstorefrontApp.controller('orderController', ['$scope', '$window', 'orderService', function ($scope, $window, orderService) {\r\n    getOrder($window.orderNumber);\r\n\r\n    function getOrder(orderNumber) {\r\n        orderService.getOrder(orderNumber).then(function (response) {\r\n            if (response && response.data) {\r\n                $scope.order = response.data;\r\n            }\r\n        });\r\n    }\r\n}]);","angular.module('storefrontApp')\r\n.directive('vaPermission', ['authService', function (authService) {\r\n    return {\r\n        link: function (scope, element, attrs) {\r\n            if (attrs.vaPermission) {\r\n                var permissionValue = attrs.vaPermission.trim();\r\n\r\n                //modelObject is a scope property of the parent/current scope\r\n                scope.$watch(attrs.securityScopes, function (value) {\r\n                    if (value) {\r\n                        toggleVisibilityBasedOnPermission(value);\r\n                    }\r\n                });\r\n\r\n                function toggleVisibilityBasedOnPermission(securityScopes) {\r\n                    var hasPermission = authService.checkPermission(permissionValue, securityScopes);\r\n                    if (hasPermission)\r\n                        angular.element(element).show();\r\n                    else\r\n                        angular.element(element).hide();\r\n                }\r\n\r\n                toggleVisibilityBasedOnPermission();\r\n                scope.$on('loginStatusChanged', toggleVisibilityBasedOnPermission);\r\n            }\r\n        }\r\n    };\r\n}]);","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('productCompareListController', ['$rootScope', '$scope', '$localStorage', '$window', 'catalogService', 'dialogService',\r\nfunction ($rootScope, $scope, $localStorage, $window, catalogService, dialogService) {\r\n    if (!$localStorage['productCompareList']) {\r\n        $localStorage['productCompareList'] = [];\r\n    }\r\n\r\n    $scope.products = $localStorage['productCompareList'];\r\n\r\n    $scope.isInProductCompareList = function (productId) {\r\n        return _.some($localStorage['productCompareList'], function (p) { return p.id == productId });\r\n    }\r\n\r\n    $scope.addProductToCompareList = function (productId, event) {\r\n        event.preventDefault();\r\n        var existingProduct = _.find($localStorage['productCompareList'], function (p) { return p.id === productId });\r\n        if (existingProduct) {\r\n            dialogService.showDialog(existingProduct, 'productCompareListDialogController', 'storefront.product-compare-list-dialog.tpl');\r\n            return;\r\n        }\r\n        if ($window.productCompareListCapacity <= $localStorage['productCompareList'].length) {\r\n            dialogService.showDialog({ capacityExceeded: true }, 'productCompareListDialogController', 'storefront.product-compare-list-dialog.tpl');\r\n            return;\r\n        }\r\n        catalogService.getProduct([productId]).then(function (response) {\r\n            if (response.data && response.data.length) {\r\n                var product = response.data[0];\r\n                _.each(product.properties, function (property) {\r\n                    property.productId = product.id;\r\n                    if (property.valueType.toLowerCase() === 'number') {\r\n                        property.value = formatNumber(property.value);\r\n                    }\r\n                });\r\n                $localStorage['productCompareList'].push(product);\r\n                dialogService.showDialog(product, 'productCompareListDialogController', 'storefront.product-compare-list-dialog.tpl');\r\n                $rootScope.$broadcast('productCompareListChanged');\r\n            }\r\n        });\r\n    }\r\n\r\n    $scope.getProductProperties = function () {\r\n        var grouped = {};\r\n        var properties = _.flatten(_.map($scope.products, function (product) { return product.properties; }));\r\n        var propertyDisplayNames = _.uniq(_.map(properties, function (property) { return property.displayName; }));\r\n        _.each(propertyDisplayNames, function (displayName) {\r\n            grouped[displayName] = [];\r\n            var props = _.where(properties, { displayName: displayName });\r\n            _.each($scope.products, function (product) {\r\n                var productProperty = _.find(props, function (prop) { return prop.productId === product.id });\r\n                if (productProperty) {\r\n                    grouped[displayName].push(productProperty);\r\n                } else {\r\n                    grouped[displayName].push({ valueType: 'ShortText', value: '-' });\r\n                }\r\n            });\r\n        });\r\n        $scope.properties = grouped;\r\n    }\r\n\r\n    $scope.hasValues = function (properties, onlyDifferences) {\r\n        var uniqueValues = _.uniq(_.map(properties, function (p) { return p.value }));\r\n        if (onlyDifferences && properties.length > 1 && uniqueValues.length == 1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    $scope.clearCompareList = function () {\r\n        $localStorage['productCompareList'] = [];\r\n        $rootScope.$broadcast('productCompareListChanged');\r\n        $scope.products = $localStorage['productCompareList'];\r\n    }\r\n\r\n    $scope.removeProduct = function (product) {\r\n        $localStorage['productCompareList'] = _.without($localStorage['productCompareList'], product);\r\n        $scope.products = $localStorage['productCompareList'];\r\n        $rootScope.$broadcast('productCompareListChanged');\r\n        $scope.getProductProperties();\r\n    }\r\n\r\n    function formatNumber(number) {\r\n        var float = parseFloat(number);\r\n        return !isNaN(float) ? float : number;\r\n    }\r\n}]);\r\n\r\nstorefrontApp.controller('productCompareListDialogController', ['$scope', '$window', 'dialogData', '$uibModalInstance',\r\nfunction ($scope, $window, dialogData, $uibModalInstance) {\r\n    $scope.dialogData = dialogData;\r\n\r\n    $scope.close = function () {\r\n        $uibModalInstance.close();\r\n    }\r\n\r\n    $scope.redirect = function (url) {\r\n        $window.location = url;\r\n    }\r\n}]);\r\n\r\nstorefrontApp.controller('productCompareListBarController', ['$scope', '$localStorage',\r\nfunction ($scope, $localStorage) {\r\n    $scope.itemsCount = $localStorage['productCompareList'] ? $localStorage['productCompareList'].length : 0;\r\n    $scope.$on('productCompareListChanged', function (event, data) {\r\n        $scope.itemsCount = $localStorage['productCompareList'].length;\r\n    });\r\n}]);","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('productListController', ['$scope', '$window', 'pricingService', function ($scope, $window, pricingService) {\r\n    var $ctrl = this;\r\n\r\n    $ctrl.loaded = false;\r\n    $ctrl.prices = {};\r\n\r\n    pricingService.getActualProductPrices($window.productList).then(function (response) {\r\n        var prices = response.data;\r\n        $ctrl.prices = _.object(_.map(prices, function(price) {\r\n            return [price.productId, price];\r\n        }));\r\n        $ctrl.loaded = !!prices.length;\r\n    });\r\n}]);\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('productController', ['$rootScope', '$scope', '$window', '$timeout', 'dialogService', 'catalogService', 'cartService', 'quoteRequestService', 'customerService', 'listService',\r\n    function ($rootScope, $scope, $window, $timeout, dialogService, catalogService, cartService, quoteRequestService, customerService, listService) {\r\n    //TODO: prevent add to cart not selected variation\r\n    // display validator please select property\r\n    // display price range\r\n\r\n    var allVariations = [];\r\n  \r\n    $scope.selectedVariation = {};\r\n    $scope.allVariationPropsMap = {};\r\n    $scope.productPrice = null;\r\n    $scope.productPriceLoaded = false;\r\n\r\n    $scope.addProductToCart = function (product, quantity) {\r\n        var dialogData = toDialogDataModel(product, quantity);\r\n        dialogService.showDialog(dialogData, 'recentlyAddedCartItemDialogController', 'storefront.recently-added-cart-item-dialog.tpl');\r\n        cartService.addLineItem(product.id, quantity).then(function (response) {\r\n            $rootScope.$broadcast('cartItemsChanged');\r\n        });\r\n    }\r\n\r\n    // TODO: Replace mock with real function\r\n    $scope.addProductsToCartMock = function () {\r\n        var rejection = {\r\n            data: {\r\n                message: \"The 1 product(s) below was not added to cart:\",\r\n                modelState: {\r\n                    \"Test\": \"Test\"\r\n                }\r\n            }\r\n        };\r\n        var items = [\r\n            {\r\n                id: \"9cbd8f316e254a679ba34a900fccb076\",\r\n                name: \"3DR Solo Quadcopter (No Gimbal)\",\r\n                imageUrl: \"//localhost/admin/assets/catalog/1428965138000_1133723.jpg\",\r\n                price: {\r\n                    actualPrice: {\r\n                        formattedAmount: \"$896.39\"\r\n                    },\r\n                    actualPriceWithTax: {\r\n                        formattedAmount: \"$1,075.67\"\r\n                    },\r\n                    listPrice: {\r\n                        formattedAmount: \"$995.99\"\r\n                    },\r\n                    listPriceWithTax: {\r\n                        formattedAmount: \"$1,195.19\"\r\n                    },\r\n                    extendedPrice: {\r\n                        formattedAmount: \"$1,792.78\"\r\n                    },\r\n                    extendedPriceWithTax: {\r\n                        formattedAmount: \"$2,151.34\"\r\n                    }\r\n                },\r\n                quantity: 2,\r\n                url: \"~/camcorders/aerial-imaging-drones/3dr-solo-quadcopter-no-gimbal\"\r\n            },\r\n            {\r\n                id: \"ad4ae79ffdbc4c97959139a0c387c72e\",\r\n                name: \"Samsung Galaxy Note 4 SM-N910C 32GB\",\r\n                imageUrl: \"//localhost/admin/assets/catalog/1416164841000_1097106.jpg\",\r\n                price: {\r\n                    actualPrice: {\r\n                        formattedAmount: \"$530.99\"\r\n                    },\r\n                    actualPriceWithTax: {\r\n                        formattedAmount: \"$637.19\"\r\n                    },\r\n                    listPrice: {\r\n                        formattedAmount: \"$589.99\"\r\n                    },\r\n                    listPriceWithTax: {\r\n                        formattedAmount: \"$707.99\"\r\n                    },\r\n                    extendedPrice: {\r\n                        formattedAmount: \"$1,592.97\"\r\n                    },\r\n                    extendedPriceWithTax: {\r\n                        formattedAmount: \"$1,911.57\"\r\n                    }\r\n                },\r\n                quantity: 5,\r\n                url: \"~/cell-phones/samsung-galaxy-note-4-sm-n910c-32gb\"\r\n            }\r\n        ];\r\n        var dialogData = toDialogDataModelMock(items, rejection);\r\n        dialogService.showDialog(dialogData, 'recentlyAddedCartItemDialogController', 'storefront.recently-added-cart-item-dialog.tpl');\r\n    }\r\n\r\n    $scope.addProductToCartById = function (productId, quantity, event) {\r\n        event.preventDefault();\r\n        catalogService.getProduct([productId]).then(function (response) {\r\n            if (response.data && response.data.length) {\r\n                var product = response.data[0];\r\n                $scope.addProductToCart(product, quantity);\r\n            }\r\n        });\r\n    }\r\n\r\n    $scope.addProductToWishlist = function (product) {\r\n        var dialogData = toDialogDataModel(product, 1);\r\n        dialogService.showDialog(dialogData, 'recentlyAddedListItemDialogController', 'storefront.recently-added-list-item-dialog.tpl');\r\n    }\r\n\r\n    $scope.addProductToActualQuoteRequest = function (product, quantity) {\r\n        var dialogData = toDialogDataModel(product, quantity);\r\n        dialogService.showDialog(dialogData, 'recentlyAddedActualQuoteRequestItemDialogController', 'storefront.recently-added-actual-quote-request-item-dialog.tpl');\r\n        quoteRequestService.addProductToQuoteRequest(product.id, quantity).then(function (response) {\r\n            $rootScope.$broadcast('actualQuoteRequestItemsChanged');\r\n        });\r\n    }\r\n\r\n    function toDialogDataModel(product, quantity) {\r\n        return { items: [angular.extend({ }, product, { quantity: quantity })] };\r\n        //     return {\r\n        //         id: product.id,\r\n        //         name: product.name,\r\n        //         imageUrl: product.primaryImage ? product.primaryImage.url : null,\r\n        //         listPrice: product.price.listPrice,\r\n        //listPriceWithTax: product.price.listPriceWithTax,\r\n        //         placedPrice: product.price.actualPrice,\r\n        //         placedPriceWithTax: product.price.actualPriceWithTax,\r\n        //         quantity: quantity,\r\n        //         updated: false\r\n        //     }\r\n    }\r\n\r\n    function toDialogDataModelMock(items, rejection) {\r\n        var dialogDataModel = {};\r\n        if (rejection) {\r\n            dialogDataModel.errorMessage = rejection.data.message;\r\n            dialogDataModel.errors = rejection.data.modelState;\r\n        }\r\n        dialogDataModel.items = items;\r\n        return dialogDataModel;\r\n    }\r\n\r\n    function initialize() {\r\n        var productIds = _.map($window.products, function (product) { return product.id });\r\n        if (!productIds || !productIds.length) {\r\n            return;\r\n        }\r\n        catalogService.getProduct(productIds).then(function (response) {\r\n            var product = response.data[0];\r\n                //Current product is also a variation (titular)\r\n                allVariations = [product].concat(product.variations || []);\r\n                $scope.allVariationPropsMap = getFlatternDistinctPropertiesMap(allVariations);\r\n\r\n            //Auto select initial product as default variation  (its possible because all our products is variations)\r\n            var propertyMap = getVariationPropertyMap(product);\r\n            _.each(_.keys(propertyMap), function (x) {\r\n                $scope.checkProperty(propertyMap[x][0])\r\n            });\r\n            $scope.selectedVariation = product;\r\n            compareProductInLists(product.id);\r\n        });        \r\n    };\r\n\r\n    function getFlatternDistinctPropertiesMap(variations) {\r\n        var retVal = {};\r\n        _.each(variations, function (variation) {\r\n            var propertyMap = getVariationPropertyMap(variation);\r\n            //merge\r\n            _.each(_.keys(propertyMap), function (x) {\r\n                    retVal[x] = _.uniq(_.union(retVal[x], propertyMap[x]), \"value\");\r\n            });\r\n        });\r\n        return retVal;\r\n    };\r\n\r\n    function getVariationPropertyMap(variation) {\r\n            return _.groupBy(variation.variationProperties, function (x) { return x.displayName });\r\n        }\r\n\r\n    function getSelectedPropsMap(variationPropsMap) {\r\n        var retVal = {};\r\n        _.each(_.keys(variationPropsMap), function (x) {\r\n            var property = _.find(variationPropsMap[x], function (y) {\r\n                return y.selected;\r\n            });\r\n            if (property) {\r\n                retVal[x] = [property];\r\n            }\r\n        });\r\n        return retVal;\r\n        }\r\n\r\n    function comparePropertyMaps(propMap1, propMap2) {\r\n        return _.every(_.keys(propMap1), function (x) {\r\n            var retVal = propMap2.hasOwnProperty(x);\r\n            if (retVal) {\r\n                    retVal = propMap1[x][0].value == propMap2[x][0].value;\r\n            }\r\n            return retVal;\r\n        });\r\n    };\r\n\r\n    function findVariationBySelectedProps(variations, selectedPropMap) {\r\n            return _.find(variations, function (x) {\r\n                return comparePropertyMaps(getVariationPropertyMap(x), selectedPropMap);\r\n        });\r\n    }\r\n\r\n    function compareProductInLists(productId) {\r\n        $scope.buttonInvalid = true;\r\n        var listNames = [{ title: 'shopping' }, { title: 'wish' }];\r\n        angular.forEach(listNames, function (listName) {\r\n            listService.contains(productId, listName.title).then(function (result) {\r\n                if (result && (result.data.contains == false)) {\r\n                    $scope.buttonInvalid = false;\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n        //Method called from View when user clicks one property value\r\n    $scope.checkProperty = function (property) {\r\n            //Select appropriate property and unselect previous selection\r\n            _.each($scope.allVariationPropsMap[property.displayName], function (x) {\r\n            x.selected = x != property ? false : !x.selected;\r\n        });\r\n\r\n            //try to find the best variation match for selected properties\r\n            $scope.selectedVariation = findVariationBySelectedProps(allVariations, getSelectedPropsMap($scope.allVariationPropsMap));\r\n    };  \r\n\r\n    initialize();\r\n}]);\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('quoteRequestController', ['$rootScope', '$scope', '$window', '$location', 'quoteRequestService', 'cartService',\r\n    function ($rootScope, $scope, $window, $location, quoteRequestService, cartService) {\r\n    initialize();\r\n\r\n    $scope.setQuoteRequestForm = function (form) {\r\n        $scope.formQuoteRequest = form;\r\n    }\r\n\r\n    $scope.displayForStatuses = function (statuses) {\r\n        return _.contains(statuses, $scope.quoteRequest.status);\r\n    }\r\n\r\n    $scope.addTierPrice = function (quoteItem) {\r\n        quoteItem.proposalPrices.push({\r\n            id: quoteItem.proposalPrices.length + 1,\r\n            price: quoteItem.salePrice,\r\n            quantity: 1\r\n        });\r\n    }\r\n\r\n    $scope.changeTierPriceQuantity = function (tierPrice, quantity) {\r\n        if (quantity < 1 || quantity.isNaN) {\r\n            return;\r\n        }\r\n        tierPrice.quantity = quantity;\r\n    }\r\n\r\n    $scope.removeTierPrice = function (quoteItem, tierPrice) {\r\n        quoteItem.proposalPrices = _.without(quoteItem.proposalPrices, tierPrice);\r\n    }\r\n\r\n    $scope.removeProductFromQuoteRequest = function (quoteItem) {\r\n        var initialQuoteItems = angular.copy($scope.quoteRequest.items);\r\n        $scope.quoteRequest.items = _.without($scope.quoteRequest.items, quoteItem);\r\n        quoteRequestService.removeProductFromQuoteRequest($scope.quoteRequest.id, quoteItem.id).then(function (response) {\r\n            getQuoteRequest($scope.quoteRequest.id);\r\n            $rootScope.$broadcast('actualQuoteRequestItemsChanged');\r\n        }, function (response) {\r\n            $scope.quoteRequest.items = initialQuoteItems;\r\n        });\r\n    }\r\n\r\n    $scope.setCountry = function (addressType, countryName) {\r\n        var country = _.find($scope.countries, function (c) { return c.name == countryName });\r\n        if (!country) {\r\n            return;\r\n        }\r\n        if (addressType == 'Billing') {\r\n            $scope.billingCountry = country;\r\n            $scope.billingCountryRegions = [];\r\n            $scope.quoteRequest.billingAddress.countryCode = country.code3 || country.code2;\r\n            $scope.quoteRequest.billingAddress.regionId = null;\r\n            $scope.quoteRequest.billingAddress.regionName = null;\r\n        }\r\n        if (addressType == 'Shipping') {\r\n            $scope.shippingCountry = country;\r\n            $scope.shippingCountryRegions = [];\r\n            $scope.quoteRequest.shippingAddress.countryCode = country.code3 || country.code2;\r\n            $scope.quoteRequest.shippingAddress.regionId = null;\r\n            $scope.quoteRequest.shippingAddress.regionName = null;\r\n        }\r\n        if (country.code3) {\r\n            getCountryRegions(addressType, country.code3);\r\n        }\r\n    }\r\n\r\n    $scope.setCountryRegion = function (addressType) {\r\n        if (addressType == 'Billing') {\r\n            var countryRegion = _.find($scope.billingCountryRegions, function (r) { return r.name == $scope.quoteRequest.billingAddress.regionName });\r\n            if (!countryRegion) {\r\n                return;\r\n            }\r\n            $scope.quoteRequest.billingAddress.regionId = countryRegion.code;\r\n        }\r\n        if (addressType == 'Shipping') {\r\n            var countryRegion = _.find($scope.shippingCountryRegions, function (r) { return r.name == $scope.quoteRequest.shippingAddress.regionName });\r\n            if (!countryRegion) {\r\n                return;\r\n            }\r\n            $scope.quoteRequest.shippingAddress.regionId = countryRegion.code;\r\n        }\r\n    }\r\n\r\n    $scope.selectCustomerAddress = function (addressType) {\r\n        if (addressType === 'Billing') {\r\n            var billingAddress = _.find($scope.customer.addresses, function (a) { return a.id === $scope.quoteRequest.billingAddress.id });\r\n            if (billingAddress) {\r\n                billingAddress.type = 'Billing';\r\n                if (billingAddress.countryCode) {\r\n                    getCountryRegions('Billing', billingAddress.countryCode);\r\n                }\r\n                $scope.quoteRequest.billingAddress = angular.copy(billingAddress);\r\n            }\r\n        }\r\n        if (addressType === 'Shipping') {\r\n            var shippingAddress = _.find($scope.customer.addresses, function (a) { return a.id === $scope.quoteRequest.shippingAddress.id });\r\n            if (shippingAddress) {\r\n                shippingAddress.type = 'Shipping';\r\n                if (shippingAddress.countryCode) {\r\n                    getCountryRegions('Shipping', shippingAddress.countryCode);\r\n                }\r\n                $scope.quoteRequest.shippingAddress = angular.copy(shippingAddress);\r\n            }\r\n        }\r\n    }\r\n\r\n    $scope.stringifyAddress = function (address) {\r\n        if (!address) {\r\n            return;\r\n        }\r\n        var stringifiedAddress = address.firstName + ' ' + address.lastName + ', ';\r\n        stringifiedAddress += address.organization ? address.organization + ', ' : '';\r\n        stringifiedAddress += address.countryName + ', ';\r\n        stringifiedAddress += address.regionName ? address.regionName + ', ' : '';\r\n        stringifiedAddress += address.city + ' ';\r\n        stringifiedAddress += address.line1 + ', ';\r\n        stringifiedAddress += address.line2 ? address.line2 : '';\r\n        stringifiedAddress += address.postalCode;\r\n        return stringifiedAddress;\r\n    }\r\n\r\n    $scope.submitQuoteRequest = function () {\r\n        $scope.formQuoteRequest.$setSubmitted();\r\n        if ($scope.formQuoteRequest.$invalid) {\r\n            return;\r\n        }\r\n        $scope.quoteRequest.billingAddress.email = $scope.quoteRequest.email;\r\n        if ($scope.quoteRequest.shippingAddress) {\r\n            $scope.quoteRequest.shippingAddress.email = $scope.quoteRequest.email;\r\n        }\r\n        quoteRequestService.submitQuoteRequest($scope.quoteRequest.id, toFormModel($scope.quoteRequest)).then(function (response) {\r\n            if ($scope.customer.isRegisteredUser) {\r\n                $scope.outerRedirect($scope.baseUrl + 'account/quoterequests');\r\n            } else {\r\n                $scope.outerRedirect($scope.baseUrl + 'account/login');\r\n            }\r\n        });\r\n    }\r\n\r\n    $scope.rejectQuoteRequest = function () {\r\n        quoteRequestService.rejectQuoteRequest($scope.quoteRequest.id).then(function (response) {\r\n            quoteRequestService.getQuoteRequest($scope.quoteRequest.id).then(function (response) {\r\n                $scope.quoteRequest = response.data;\r\n            });\r\n        });\r\n    }\r\n\r\n    $scope.selectTierPrice = function () {\r\n        quoteRequestService.getTotals($scope.quoteRequest.id, toFormModel($scope.quoteRequest)).then(function (response) {\r\n            $scope.quoteRequest.totals = response.data;\r\n        });\r\n    }\r\n\r\n    $scope.confirmQuoteRequest = function () {\r\n        quoteRequestService.confirmQuoteRequest($scope.quoteRequest.id, toFormModel($scope.quoteRequest)).then(function (response) {\r\n            $scope.outerRedirect($scope.baseUrl + 'cart/checkout/#/shipping-address');\r\n        });\r\n    }\r\n\r\n    $scope.setRequestShippingQuote = function () {\r\n        if (!$scope.quoteRequest.requestShippingQuote) {\r\n            $scope.quoteRequest.shippingAddress = null;\r\n        }\r\n    }\r\n\r\n    $scope.setShippingAddressEqualsBilling = function () {\r\n        if ($scope.quoteRequest.shippingAddressEqualsBilling) {\r\n            $scope.quoteRequest.shippingAddress = angular.copy($scope.quoteRequest.billingAddress);\r\n            $scope.quoteRequest.shippingAddress.type = 'Shipping';\r\n            if ($scope.quoteRequest.shippingAddress.countryCode) {\r\n                $scope.shippingCountry = $scope.billingCountry;\r\n                getCountryRegions('Shipping', $scope.quoteRequest.shippingAddress.countryCode);\r\n            }\r\n        }\r\n    }\r\n\r\n    $scope.tierPricesUnique = function (quoteItem) {\r\n        var quantities = _.map(quoteItem.proposalPrices, function (p) { return p.quantity });\r\n        return _.uniq(quantities).length == quoteItem.proposalPrices.length;\r\n    }\r\n\r\n    function initialize() {\r\n        var quoteRequestNumber = $location.url().replace('/', '') || $window.currentQuoteRequestNumber;\r\n        $scope.billingCountry = null;\r\n        $scope.shippingCountry = null;\r\n        getCountries();\r\n        if (quoteRequestNumber) {\r\n            getQuoteRequest(quoteRequestNumber);\r\n        } else {\r\n            $scope.quoteRequest = { itemsCount: 0 };\r\n        }\r\n    }\r\n\r\n    function getQuoteRequest(number) {\r\n        quoteRequestService.getQuoteRequest(number).then(function (response) {\r\n            var quoteRequest = response.data;\r\n            if (!quoteRequest.billingAddress) {\r\n                if ($scope.customer.addresses.length) {\r\n                    quoteRequest.billingAddress = angular.copy($scope.customer.addresses[0]);\r\n                    quoteRequest.billingAddress.type = 'Billing';\r\n                    if (quoteRequest.billingAddress.countryCode) {\r\n                        getCountryRegions('Billing', quoteRequest.billingAddress.countryCode);\r\n                    }\r\n                } else {\r\n                    quoteRequest.billingAddress = {\r\n                        firstName: $scope.customer.firstName,\r\n                        lastName: $scope.customer.lastName\r\n                    };\r\n                }\r\n            }\r\n            _.each(quoteRequest.items, function (quoteItem) {\r\n                var i = 1;\r\n                _.each(quoteItem.proposalPrices, function (tierPrice) {\r\n                    tierPrice.id = i;\r\n                    if (quoteItem.selectedTierPrice.quantity == tierPrice.quantity) {\r\n                        quoteItem.selectedTierPrice = tierPrice;\r\n                    }\r\n                    i++;\r\n                });\r\n            });\r\n            quoteRequest.requestShippingQuote = true;\r\n            $scope.quoteRequest = quoteRequest;\r\n        });\r\n    }\r\n\r\n    function getCountries() {\r\n        cartService.getCountries().then(function (response) {\r\n            $scope.countries = response.data;\r\n        });\r\n    }\r\n\r\n    function getCountryRegions(addressType, countryCode) {\r\n        cartService.getCountryRegions(countryCode).then(function (response) {\r\n            var countryRegions = response.data;\r\n            if (addressType == 'Billing') {\r\n                $scope.billingCountryRegions = countryRegions || [];\r\n            }\r\n            if (addressType == 'Shipping') {\r\n                $scope.shippingCountryRegions = countryRegions || [];\r\n            }\r\n        });\r\n    }\r\n\r\n    function toFormModel(quoteRequest) {\r\n        var quoteRequestFormModel = {\r\n            id: quoteRequest.id,\r\n            tag: quoteRequest.tag,\r\n            status: quoteRequest.status,\r\n            comment: quoteRequest.comment,\r\n            billingAddress: quoteRequest.billingAddress,\r\n            shippingAddress: quoteRequest.shippingAddress,\r\n            items: []\r\n        };\r\n        _.each(quoteRequest.items, function (quoteItem) {\r\n            var quoteItemFormModel = {\r\n                id: quoteItem.id,\r\n                comment: quoteItem.comment,\r\n                selectedTierPrice: {\r\n                    price: quoteItem.selectedTierPrice.price.amount,\r\n                    quantity: quoteItem.selectedTierPrice.quantity\r\n                },\r\n                proposalPrices: []\r\n            };\r\n            _.each(quoteItem.proposalPrices, function (tierPrice) {\r\n                quoteItemFormModel.proposalPrices.push({\r\n                    price: tierPrice.price.amount,\r\n                    quantity: tierPrice.quantity\r\n                });\r\n            });\r\n            quoteRequestFormModel.items.push(quoteItemFormModel);\r\n        });\r\n\r\n        return quoteRequestFormModel;\r\n    }\r\n}]);\r\n\r\nstorefrontApp.controller('actualQuoteRequestBarController', ['$scope', 'quoteRequestService', function ($scope, quoteRequestService) {\r\n    getCurrentQuoteRequest();\r\n\r\n    $scope.$on('actualQuoteRequestItemsChanged', function (event, data) {\r\n        getCurrentQuoteRequest();\r\n    });\r\n\r\n    function getCurrentQuoteRequest() {\r\n        quoteRequestService.getCurrentQuoteRequest().then(function (response) {\r\n            $scope.actualQuoteRequest = response.data;\r\n        });\r\n    }\r\n}]);\r\n\r\nstorefrontApp.controller('recentlyAddedActualQuoteRequestItemDialogController', ['$scope', '$window', '$uibModalInstance', 'dialogData',\r\n    function ($scope, $window, $uibModalInstance, dialogData) {\r\n\r\n    $scope.$on('actualQuoteRequestItemsChanged', function (event, data) {\r\n        dialogData.updated = true;\r\n    });\r\n\r\n    $scope.dialogData = dialogData;\r\n\r\n    $scope.close = function () {\r\n        $uibModalInstance.close();\r\n    }\r\n\r\n    $scope.redirect = function (url) {\r\n        $window.location = url;\r\n    }\r\n}]);","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('recommendationsController', ['$scope', '$timeout', 'recommendationService', function ($scope, $timeout, recommendationService) {\r\n   \r\n    $scope.isBlockVisible = false;\r\n    $scope.productListRecommendationsLoaded = false;\r\n    $scope.productListRecommendations = [];\r\n   \r\n    $scope.getRecommendations = function (evalContext) {\r\n     \r\n        if (_.isString(evalContext.productIds)) {\r\n            if (evalContext.productIds.match(\",\")) {\r\n                var values = evalContext.productIds.split(',');\r\n                evalContext.productIds = values;\r\n            }\r\n            else {\r\n                evalContext.productIds = [evalContext.productIds];\r\n            }\r\n        }\r\n        recommendationService.getRecommendedProducts(evalContext).then(function (response) {\r\n            var products = response.data;\r\n            if (products.length) {\r\n                for (var i = 0; i < products.length; i++) {\r\n                    $scope.productListRecommendations.push(products[i]);\r\n                }\r\n\r\n                $scope.isBlockVisible = products.length > 0;\r\n            }\r\n\r\n            $scope.productListRecommendationsLoaded = true;            \r\n        });\r\n    }\r\n    $scope.startRecordInteraction = function () {\r\n        //Necessary condition for ensure what angularjs rendering process finished\r\n        $timeout(function () {\r\n           window.startRecordInteraction();\r\n        });\r\n    }\r\n}]);","var storefrontApp = angular.module('storefrontApp');\r\nstorefrontApp.controller('searchBarController', ['$scope', '$timeout', '$window', 'catalogService', function ($scope, $timeout, $window, catalogService) {\r\n    var timer;\r\n\r\n    $scope.query = $window.searchQuery;\r\n\r\n    $scope.getSuggestions = function () {\r\n        if (!$scope.query) {\r\n            return;\r\n        }\r\n        $timeout.cancel(timer);\r\n        timer = $timeout(function () {\r\n            $scope.searching = true;\r\n            $scope.categorySuggestions = [];\r\n            $scope.productSuggestions = [];\r\n            var searchCriteria = {\r\n                keyword: $scope.query,\r\n                skip: 0,\r\n                take: $window.suggestionsLimit\r\n            }\r\n            catalogService.searchCategories(searchCriteria).then(function (response) {\r\n                var categories = response.data.categories;\r\n                if (categories.length > 5) {\r\n                    searchCriteria.take = $window.suggestionsLimit - 5;\r\n                    $scope.categorySuggestions = _.first(categories, 5);\r\n                } else {\r\n                    searchCriteria.take = $window.suggestionsLimit - categories.length;\r\n                    $scope.categorySuggestions = categories;\r\n                }\r\n                catalogService.search(searchCriteria).then(function (response) {\r\n                    var products = response.data.products;\r\n                    $scope.productSuggestions = products;\r\n                    $scope.searching = false;\r\n                });\r\n            });\r\n        }, 300);\r\n    }\r\n}]);","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.service('dialogService', ['$uibModal', function ($uibModal) {\r\n    return {\r\n        showDialog: function (dialogData, controller, templateUrl) {\r\n            var modalInstance = $uibModal.open({\r\n                controller: controller,\r\n                templateUrl: templateUrl,\r\n                resolve: {\r\n                    dialogData: function () {\r\n                        return dialogData;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('feedbackService', ['$http', function ($http) {\r\n    return {\r\n        postFeedback: function (data) {\r\n            return $http.post('storefrontapi/feedback', { model: data });\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('customerService', ['$http', function ($http) {\r\n    return {\r\n        getCurrentCustomer: function () {\r\n            return $http.get('storefrontapi/account?t=' + new Date().getTime());\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('fulfillmentCenterService', ['$http', 'apiBaseUrl', function($http, apiBaseUrl) {\r\n    return {\r\n        searchFulfillmentCenters: function (criteria) {\r\n            return $http.post(apiBaseUrl + 'api/fulfillment/search/centers', criteria);\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('marketingService', ['$http', function ($http) {\r\n    return {\r\n        getDynamicContent: function (placeName) {\r\n            return $http.get('storefrontapi/marketing/dynamiccontent/' + placeName + '?t=' + new Date().getTime());\r\n        },\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('pricingService', ['$http', function ($http) {\r\n\treturn {\r\n\t\tgetActualProductPrices: function (products) {\r\n\t\t    return $http.post('storefrontapi/pricing/actualprices', { products: products });\r\n\t\t}\r\n\t}\r\n}]);\r\n\r\nstorefrontApp.service('catalogService', ['$http', function ($http) {\r\n    return {\r\n        getProduct: function (productIds) {\r\n            return $http.get('storefrontapi/products?productIds=' + productIds + '&t=' + new Date().getTime());\r\n        },\r\n        search: function (criteria) {\r\n            return $http.post('storefrontapi/catalog/search', { searchCriteria: criteria });\r\n        },\r\n        searchCategories: function (criteria) {\r\n            return $http.post('storefrontapi/categories/search', { searchCriteria: criteria });\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('cartService', ['$http', function ($http) {\r\n    return {\r\n        getCart: function () {\r\n            return $http.get('storefrontapi/cart?t=' + new Date().getTime());\r\n        },\r\n        getCartItemsCount: function () {\r\n            return $http.get('storefrontapi/cart/itemscount?t=' + new Date().getTime());\r\n        },\r\n        addLineItem: function (productId, quantity) {\r\n            return $http.post('storefrontapi/cart/items', { id: productId, quantity: quantity });\r\n        },\r\n        changeLineItemQuantity: function (lineItemId, quantity) {\r\n            return $http.put('storefrontapi/cart/items', { lineItemId: lineItemId, quantity: quantity });\r\n        },\r\n        removeLineItem: function (lineItemId) {\r\n            return $http.delete('storefrontapi/cart/items?lineItemId=' + lineItemId);\r\n        },\r\n        changeLineItemPrice: function (lineItemId, newPrice) {\r\n        \treturn $http.put('storefrontapi/cart/items/price', { lineItemId: lineItemId, newPrice: newPrice});\r\n        },\r\n        clearCart: function () {\r\n            return $http.post('storefrontapi/cart/clear');\r\n        },\r\n        getCountries: function () {\r\n            return $http.get('storefrontapi/countries?t=' + new Date().getTime());\r\n        },\r\n        getCountryRegions: function (countryCode) {\r\n        \treturn $http.get('storefrontapi/countries/' + countryCode + '/regions?t=' + new Date().getTime());\r\n        },\r\n        addCoupon: function (couponCode) {\r\n            return $http.post('storefrontapi/cart/coupons/' + couponCode);\r\n        },\r\n        removeCoupon: function () {\r\n            return $http.delete('storefrontapi/cart/coupons');\r\n        },\r\n        addOrUpdateShipment: function (shipment) {\r\n            return $http.post('storefrontapi/cart/shipments', shipment);\r\n        },\r\n        addOrUpdatePayment: function (payment) {\r\n            return $http.post('storefrontapi/cart/payments', payment );\r\n        },\r\n        getAvailableShippingMethods: function (shipmentId) {\r\n            return $http.get('storefrontapi/cart/shipments/' + shipmentId + '/shippingmethods?t=' + new Date().getTime());\r\n        },\r\n        getAvailablePaymentMethods: function () {\r\n            return $http.get('storefrontapi/cart/paymentmethods?t=' + new Date().getTime());\r\n        },\r\n        addOrUpdatePaymentPlan: function (plan) {\r\n            return $http.post('storefrontapi/cart/paymentPlan', plan);\r\n        },\r\n        removePaymentPlan: function () {\r\n            return $http.delete('storefrontapi/cart/paymentPlan');\r\n        },\r\n        createOrder: function (bankCardInfo) {\r\n            return $http.post('storefrontapi/cart/createorder', { bankCardInfo: bankCardInfo });\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('listService', ['$http', function ($http) {\r\n    return {\r\n        getWishlist: function (listName) {\r\n            return $http.get('storefrontapi/lists/' + listName + '?t=' + new Date().getTime());\r\n        },\r\n        contains: function (productId, listName) {\r\n            return $http.get('storefrontapi/lists/' + listName +'/items/'+ productId + '/contains?t=' + new Date().getTime());\r\n        },\r\n        addLineItem: function (productId, listName) {\r\n            return $http.post('storefrontapi/lists/' + listName + '/items', { productId: productId });\r\n        },\r\n        removeLineItem: function (lineItemId, listName) {\r\n            return $http.delete('storefrontapi/lists/' + listName + '/items/' + lineItemId);\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('quoteRequestService', ['$http', function ($http) {\r\n    return {\r\n        getCurrentQuoteRequest: function () {\r\n            return $http.get('storefrontapi/quoterequest/current?t=' + new Date().getTime());\r\n        },\r\n        getQuoteRequest: function (number) {\r\n            return $http.get('storefrontapi/quoterequests/' + number + '?t=' + new Date().getTime());\r\n        },\r\n        getQuoteRequestItemsCount: function (number) {\r\n            return $http.get('storefrontapi/quoterequests/' + number + '/itemscount?t=' + new Date().getTime());\r\n        },\r\n        addProductToQuoteRequest: function (productId, quantity) {\r\n            return $http.post('storefrontapi/quoterequests/current/items', { productId: productId, quantity: quantity });\r\n        },\r\n        removeProductFromQuoteRequest: function (quoteRequestNumber, quoteItemId) {\r\n            return $http.delete('storefrontapi/quoterequests/' + quoteRequestNumber + '/items/' + quoteItemId);\r\n        },\r\n        submitQuoteRequest: function (quoteRequestNumber, quoteRequest) {\r\n            return $http.post('storefrontapi/quoterequests/' + quoteRequestNumber + '/submit', { quoteForm: quoteRequest });\r\n        },\r\n        rejectQuoteRequest: function (quoteRequestNumber) {\r\n            return $http.post('storefrontapi/quoterequests/' + quoteRequestNumber + '/reject');\r\n        },\r\n        updateQuoteRequest: function (quoteRequestNumber, quoteRequest) {\r\n            return $http.put('storefrontapi/quoterequests/' + quoteRequestNumber + '/update', { quoteRequest: quoteRequest });\r\n        },\r\n        getTotals: function (quoteRequestNumber, quoteRequest) {\r\n            return $http.post('storefrontapi/quoterequests/' + quoteRequestNumber + '/totals', { quoteRequest: quoteRequest });\r\n        },\r\n        confirmQuoteRequest: function (quoteRequestNumber, quoteRequest) {\r\n            return $http.post('storefrontapi/quoterequests/' + quoteRequestNumber + '/confirm', { quoteRequest: quoteRequest });\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('recommendationService', ['$http', function ($http) {\r\n    return {\r\n        getRecommendedProducts: function (requestData) {\r\n            return $http.post('storefrontapi/recommendations', requestData );\r\n        }\r\n    }\r\n}]);\r\n\r\nstorefrontApp.service('orderService', ['$http', function ($http) {\r\n    return {\r\n        getOrder: function (orderNumber) {\r\n            return $http.get('storefrontapi/orders/' + orderNumber + '?t=' + new Date().getTime());\r\n        }\r\n    }\r\n}]);\r\n","var storefrontApp = angular.module('storefrontApp');\r\nstorefrontApp.component('vcAddress', {\r\n    templateUrl: \"themes/assets/address.tpl.html\",\r\n    bindings: {\r\n        address: '=',\r\n        addresses: '<',\r\n        countries: '=',\r\n        validationContainer: '=',\r\n        getCountryRegions: '&',\r\n        editMode: '<',\r\n        onUpdate: '&'\r\n    },\r\n    require: {\r\n        checkoutStep: '?^vcCheckoutWizardStep'\r\n    },\r\n    controller: ['$scope', function ($scope) {\r\n        var ctrl = this;\r\n        ctrl.types = [{ id: 'Billing', name: 'Billing' }, { id: 'Shipping', name: 'Shipping' }, { id: 'BillingAndShipping', name: 'Billing and Shipping' }];\r\n        \r\n        this.$onInit = function () {\r\n            if (ctrl.validationContainer)\r\n                ctrl.validationContainer.addComponent(this);\r\n            if (ctrl.checkoutStep)\r\n                ctrl.checkoutStep.addComponent(this);\r\n        };\r\n\r\n        this.$onDestroy = function () {\r\n            if (ctrl.validationContainer)\r\n                ctrl.validationContainer.removeComponent(this);\r\n            if (ctrl.checkoutStep)\r\n                ctrl.checkoutStep.removeComponent(this);\r\n        };\r\n\r\n        function populateRegionalDataForAddress(address) {\r\n            if (address) {\r\n                //Set country object for address\r\n                address.country = _.findWhere(ctrl.countries, { code3: address.countryCode });\r\n                if (address.country != null) {\r\n                    ctrl.address.countryName = ctrl.address.country.name;\r\n                    ctrl.address.countryCode = ctrl.address.country.code3;\r\n                }\r\n\r\n                if (address.country) {\r\n                    if (address.country.regions) {\r\n                        setAddressRegion(address, address.country.regions);\r\n                    }\r\n                    else {\r\n                        ctrl.getCountryRegions({ country: address.country }).then(function (regions) {\r\n                            address.country.regions = regions;\r\n                            setAddressRegion(address, regions);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function setAddressRegion(address, regions) {\r\n            address.region = _.findWhere(regions, { code: address.regionId });\r\n            if (address.region) {\r\n                ctrl.address.regionId = ctrl.address.region.code;\r\n                ctrl.address.regionName = ctrl.address.region.name;\r\n            }\r\n            else {\r\n                ctrl.address.regionId = undefined;\r\n                ctrl.address.regionName = undefined;\r\n            }\r\n        }\r\n\r\n        ctrl.setForm = function (frm) { ctrl.form = frm; };\r\n\r\n        ctrl.validate = function () {\r\n            if (ctrl.form) {\r\n                ctrl.form.$setSubmitted();\r\n                return ctrl.form.$valid;\r\n            }\r\n            return true;\r\n        };\r\n\r\n        function stringifyAddress(address) {\r\n            var addressType = '';\r\n\r\n            var type = _.find(ctrl.types, function (i) { return i.id == ctrl.address.addressType });\r\n            if (type)\r\n                addressType = '[' + type.name + '] ';\r\n\r\n            var stringifiedAddress = addressType;\r\n            stringifiedAddress += address.firstName + ' ' + address.lastName + ', ';\r\n            stringifiedAddress += address.organization ? address.organization + ', ' : '';\r\n            stringifiedAddress += address.countryName + ', ';\r\n            stringifiedAddress += address.regionName ? address.regionName + ', ' : '';\r\n            stringifiedAddress += address.city + ' ';\r\n            stringifiedAddress += address.line1 + ', ';\r\n            stringifiedAddress += address.line2 ? address.line2 : '';\r\n            stringifiedAddress += address.postalCode;\r\n            return stringifiedAddress;\r\n        }\r\n\r\n        $scope.$watch('$ctrl.address', function () {\r\n            if (ctrl.address) {\r\n                populateRegionalDataForAddress(ctrl.address);\r\n                ctrl.address.name = stringifyAddress(ctrl.address);\r\n            }\r\n            ctrl.onUpdate({ address: ctrl.address });\r\n        }, true);\r\n\r\n    }]\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.component('vcCreditCard', {\r\n    templateUrl: \"themes/assets/js/common-components/creditCard.tpl.html\",\r\n    require: {\r\n        checkoutStep: '?^vcCheckoutWizardStep'\r\n    },\r\n    bindings: {\r\n        card: '=',\r\n        validationContainer: '='\r\n    },\r\n    controller: ['$scope', '$filter', function ($scope, $filter) {\r\n        var ctrl = this;\r\n\r\n        this.$onInit = function () {\r\n            if(ctrl.validationContainer)\r\n                ctrl.validationContainer.addComponent(this);\r\n            if (ctrl.checkoutStep)\r\n                ctrl.checkoutStep.addComponent(this);\r\n        };\r\n\r\n        this.$onDestroy = function () {\r\n            if (ctrl.validationContainer)\r\n                ctrl.validationContainer.removeComponent(this);\r\n            if (ctrl.checkoutStep)\r\n                ctrl.checkoutStep.removeComponent(this);\r\n        };\r\n\r\n        $scope.$watch('$ctrl.card.bankCardHolderName', function (val) {\r\n            if (ctrl.card) {\r\n                ctrl.card.bankCardHolderName = $filter('uppercase')(val);\r\n            }\r\n        }, true);\r\n\r\n        ctrl.validate = function () {\r\n            ctrl.form.$setSubmitted();\r\n            return !ctrl.form.$invalid;\r\n        }\r\n\r\n    }]\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.directive('dropdownClose', function () {\r\n    return {\r\n        require: ['?^uibDropdown'],\r\n        link: function (scope, element, attrs, ctrls) {\r\n            var dropdownCtrl = ctrls[0];\r\n            if (!dropdownCtrl) {\r\n                return;\r\n            }\r\n\r\n            var closeDropdown = function () {\r\n                if (!element.hasClass('disabled') && !attrs.disabled) {\r\n                    scope.$apply(function () {\r\n                        dropdownCtrl.toggle(false);\r\n                    });\r\n                }\r\n            };\r\n\r\n            element.on('click', closeDropdown);\r\n\r\n            scope.$on('$destroy', function () {\r\n                element.off('click', closeDropdown);\r\n            });\r\n        }\r\n    };\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\nstorefrontApp.component('vcErrors', {\r\n    templateUrl: \"themes/assets/errors.tpl.html\",\r\n    bindings: {\r\n        level: '<',\r\n        message: '<',\r\n        errors: '<'\r\n    },\r\n    controller: [function () {\r\n        var $ctrl = this;\r\n        $ctrl.level = $ctrl.level || 'danger';\r\n    }]\r\n});\r\n","angular.module('storefrontApp')\r\n\r\n.component('vcLabeledInput', {\r\n    templateUrl: \"themes/assets/labeled-input.tpl.html\",\r\n    bindings: {\r\n        value: '=',\r\n        form: '=',\r\n        name: '@',\r\n        placeholder: '@',\r\n        type: '@?',\r\n        required: '<',\r\n        requiredError: '@?',\r\n        autofocus: '<',\r\n        disabled: '<'\r\n    },\r\n    controller: [function () {\r\n        var $ctrl = this;\r\n        \r\n        $ctrl.validate = function () {\r\n            $ctrl.form.$setSubmitted();\r\n            return $ctrl.form.$valid;\r\n        };\r\n\r\n    }]\r\n});\r\n","angular.module('storefrontApp')\r\n\r\n.component('vcLabeledSelect', {\r\n    templateUrl: \"themes/assets/labeled-select.tpl.html\",\r\n    require: {\r\n        ngModel: \"?ngModel\"\r\n    },\r\n    bindings: {\r\n        options: '<',\r\n        select: '&',\r\n        form: '=',\r\n        name: '@',\r\n        placeholder: '<',\r\n        required: '<',\r\n        requiredError: '@?',\r\n        autofocus: '<',\r\n        disabled: '<'\r\n    },\r\n    controller: ['$scope', function ($scope) {\r\n        var $ctrl = this;\r\n        \r\n        $ctrl.$onInit = function() {\r\n            if ($ctrl.required)\r\n                $ctrl.ngModel.$setValidity('required', false);\r\n            $ctrl.ngModel.$render = function() {\r\n                $ctrl.value = $ctrl.ngModel.$viewValue;\r\n            };\r\n        };\r\n\r\n        $ctrl.validate = function () {\r\n            $ctrl.form.$setSubmitted();\r\n            return $ctrl.form.$valid;\r\n        };\r\n\r\n        var select = $ctrl.select;\r\n        $ctrl.select = function(option) {\r\n            select(option);\r\n            $ctrl.value = option;\r\n            if ($ctrl.required)\r\n                $ctrl.ngModel.$setValidity('required', false);\r\n            $ctrl.ngModel.$setViewValue($ctrl.value);\r\n        };        \r\n    }]\r\n});","angular.module('storefrontApp')\r\n\r\n.component('vcLabeledTextArea', {\r\n    templateUrl: \"themes/assets/labeled-textarea.tpl.html\",\r\n    bindings: {\r\n        value: '=',\r\n        form: '=',\r\n        name: '@',\r\n        label: '@',\r\n        required: '<',\r\n        requiredError: '@?',\r\n        pattern: '<?',\r\n        autofocus: '<'\r\n    },\r\n    controller: [function () {\r\n        var $ctrl = this;\r\n\r\n        $ctrl.validate = function () {\r\n            $ctrl.form.$setSubmitted();\r\n            return $ctrl.form.$valid;\r\n        };\r\n\r\n    }]\r\n});","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.component('vcLineItems', {\r\n    templateUrl: \"themes/assets/js/common-components/lineItems.tpl.liquid\",\r\n    bindings: {\r\n        items: '='\r\n    }\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\nstorefrontApp.component('vcMember', {\r\n    templateUrl: \"themes/assets/member.tpl.html\",\r\n    bindings: {\r\n        member: '=',\r\n        memberComponent: '='\r\n    },\r\n    controller: ['$scope', function ($scope) {\r\n        var $ctrl = this;\r\n\r\n        this.$onInit = function () {\r\n            $ctrl.memberComponent = this;\r\n        };\r\n\r\n        this.$onDestroy = function () {\r\n            $ctrl.memberComponent = null;\r\n        };\r\n\r\n        $ctrl.setForm = function (frm) { $ctrl.form = frm; };\r\n\r\n\r\n        $ctrl.validate = function () {\r\n            if ($ctrl.form) {\r\n                $ctrl.form.$setSubmitted();\r\n                return $ctrl.form.$valid;\r\n            }\r\n            return true;\r\n        };\r\n    }]\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\nstorefrontApp.component('vcMemberDetail', {\r\n    templateUrl: \"themes/assets/memberDetail.tpl.html\",\r\n    bindings: {\r\n        member: '=',\r\n        memberComponent: '=',\r\n        fieldsConfig: '<'\r\n    },\r\n    controller: ['$scope', function ($scope) {\r\n        var $ctrl = this;\r\n        \r\n        $ctrl.config = [\r\n            {\r\n                field: 'CompanyName',\r\n                disabled: false,\r\n                visible: true,\r\n                required: true\r\n            },\r\n            {\r\n                field: 'Email',\r\n                disabled: false,\r\n                visible: true,\r\n                required: true\r\n            },\r\n            {\r\n                field: 'UserName',\r\n                disabled: false,\r\n                visible: true\r\n            },\r\n            {\r\n                field: 'Password',\r\n                disabled: false,\r\n                visible: true\r\n            },\r\n            {\r\n                field: 'Roles',\r\n                disabled: false,\r\n                visible:  false\r\n            }\r\n        ];\r\n\r\n        if ($ctrl.fieldsConfig)\r\n            angular.extend($ctrl.config, $ctrl.fieldsConfig);\r\n\r\n        $ctrl.rolesComponent = null;\r\n\r\n        this.$onInit = function () {\r\n            $ctrl.memberComponent = this;\r\n        };\r\n\r\n        this.$onDestroy = function () {\r\n            $ctrl.memberComponent = null;\r\n        };\r\n\r\n        $ctrl.setForm = function (frm) {\r\n            $ctrl.form = frm;\r\n        };\r\n\r\n        $ctrl.validate = function () {\r\n            if ($ctrl.form) {\r\n                $ctrl.form.$setSubmitted();\r\n                return $ctrl.form.$valid;\r\n            }\r\n            return true;\r\n        };\r\n\r\n        $ctrl.showField = function (field) {\r\n            return getFieldConfig(field).visible == true;\r\n        }\r\n\r\n        $ctrl.disableField = function (field) {\r\n            return getFieldConfig(field).disabled == true;\r\n        }\r\n\r\n        $ctrl.requiredField = function (field) {\r\n            return getFieldConfig(field).required == true;\r\n        }\r\n\r\n        function getFieldConfig(field) {\r\n            var configItem = _.first(_.filter($ctrl.config, function (configItem) { return configItem.field === field; }));\r\n            return configItem;\r\n        }\r\n    }]\r\n});\r\n\r\nstorefrontApp.directive('confirmPasswordValidation', function () {\r\n    return {\r\n        require: 'ngModel',\r\n        link: function (scope, elem, attr, ngModel) {\r\n            ngModel.$parsers.unshift(function (value, scope) {\r\n                var isValid = true;\r\n                var password = ngModel.$$parentForm.Password.$viewValue;\r\n\r\n                if (password) {\r\n                    isValid = password === value;\r\n                }\r\n\r\n                ngModel.$setValidity('confirmPasswordValidation', isValid);\r\n                return value;\r\n            });\r\n        }\r\n    };\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.component('vcPaymentMethods', {\r\n    templateUrl: \"themes/assets/js/common-components/paymentMethods.tpl.html\",\r\n    require: {\r\n        checkoutStep: '?^vcCheckoutWizardStep'\r\n    },\r\n    bindings: {\r\n        getAvailPaymentMethods: '&',\r\n        onSelectMethod: '&',\r\n        paymentMethod: '=',\r\n        validationContainer: '='\r\n    },\r\n    controller: ['$scope', function ($scope) {\r\n        var ctrl = this;\r\n\r\n        this.$onInit = function () {\r\n            ctrl.getAvailPaymentMethods().then(function (methods) {\r\n                ctrl.availPaymentMethods = _.sortBy(methods, function (x) { return x.priority; });\r\n                if (ctrl.paymentMethod) {\r\n                    ctrl.paymentMethod = _.findWhere(ctrl.availPaymentMethods, { code: ctrl.paymentMethod.code });\r\n                }\r\n                if (!ctrl.paymentMethod && ctrl.availPaymentMethods.length > 0) {\r\n                    ctrl.selectMethod(ctrl.availPaymentMethods[0]);\r\n                }\r\n            })\r\n            if (ctrl.validationContainer)\r\n                ctrl.validationContainer.addComponent(this);\r\n            if (ctrl.checkoutStep)\r\n                ctrl.checkoutStep.addComponent(this);\r\n        };\r\n\r\n        this.$onDestroy = function () {\r\n            if (ctrl.validationContainer)\r\n                ctrl.validationContainer.removeComponent(this);\r\n            if (ctrl.checkoutStep)\r\n                ctrl.checkoutStep.removeComponent(this);\r\n        };\r\n\r\n        ctrl.validate = function () {\r\n            return ctrl.paymentMethod;\r\n        }\r\n\r\n        ctrl.selectMethod = function (method) {\r\n            ctrl.paymentMethod = method;\r\n            ctrl.onSelectMethod({ paymentMethod: method });\r\n        };\r\n    }]\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\nstorefrontApp.component('vcRoles', {\r\n    templateUrl: \"themes/assets/roles.tpl.html.liquid\",\r\n    bindings: {\r\n        value: '=',\r\n        accounts: \"<\",\r\n        form: '=',\r\n        name: \"@\",\r\n        required: \"<\",\r\n        disabled: \"<\"\r\n    },\r\n    controller: ['$scope', 'roleService', 'loadingIndicatorService', function ($scope, roleService, loader) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n\r\n        $scope.$watch(function(){\r\n            return roleService.available;\r\n        }, function(){\r\n            $ctrl.availableRoles = _.map(roleService.available, function(availableRole) {\r\n                return availableRole;\r\n            });\r\n            $ctrl.getRole();\r\n        });\r\n\r\n        $ctrl.$onChanges = function() {\r\n            $ctrl.getRole();\r\n        };\r\n        \r\n        $ctrl.getRole = function() {\r\n            if ($ctrl.accounts) {\r\n                $ctrl.value = roleService.get($ctrl.accounts);\r\n            }\r\n        };\r\n\r\n        $ctrl.selectRole = function(role){\r\n            if ($ctrl.value)\r\n                $ctrl.value.assigned = false;\r\n            role.assigned = true;\r\n        };\r\n    }]\r\n});","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.config(['$provide', function ($provide) {\r\n    $provide.decorator('uibDropdownDirective', ['$delegate', function ($delegate) {\r\n        var directive = $delegate[0];\r\n        var compile = directive.compile;\r\n        directive.compile = function () {\r\n            var link = compile.apply(this, arguments);\r\n            return function (scope, element, attrs, dropdownCtrl) {\r\n                if (attrs.autoClose === 'mouseleave') {\r\n                    dropdownCtrl.toggle(false);\r\n                }\r\n\r\n                var closeDropdown = function() {\r\n                    scope.$apply(function () {\r\n                        if (attrs.autoClose === 'mouseleave') {\r\n                            dropdownCtrl.toggle(false);\r\n                        }\r\n                    });\r\n                };\r\n\r\n                element.on('mouseleave', closeDropdown);\r\n\r\n                link.apply(this, arguments);\r\n\r\n                scope.$on('$destroy', function() {\r\n                    element.off('mouseleave', closeDropdown);\r\n                });\r\n            };\r\n        };\r\n        return $delegate;\r\n    }]);\r\n\r\n    $provide.decorator('uibDropdownToggleDirective', ['$delegate', function($delegate) {\r\n        var directive = $delegate[0];\r\n        directive.controller = function () { };\r\n        $delegate[0] = directive;\r\n        return $delegate;\r\n    }]);\r\n}]);\r\n\r\nstorefrontApp.directive('toggleOnMouseEnter', function() {\r\n    return {\r\n        require: ['?^uibDropdown', '?uibDropdownToggle'],\r\n        link: function (scope, element, attrs, ctrls) {\r\n            var dropdownCtrl = ctrls[0];\r\n            var dropdownToggleCtrl = ctrls[1];\r\n            if (!(dropdownCtrl && dropdownToggleCtrl)) {\r\n                return;\r\n            }\r\n\r\n            element.addClass('toggle-on-mouse-enter');\r\n\r\n            var openDropdown = function () {\r\n                if (!element.hasClass('disabled') && !attrs.disabled) {\r\n                    scope.$apply(function () {\r\n                        dropdownCtrl.toggle(true);\r\n                    });\r\n                }\r\n            };\r\n\r\n            element.on('mouseenter', openDropdown);\r\n\r\n            scope.$on('$destroy', function () {\r\n                element.off('mouseenter', openDropdown);\r\n            });\r\n        }\r\n    };\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.component('vcTotals', {\r\n    templateUrl: \"themes/assets/js/common-components/totals.tpl.liquid\",\r\n\tbindings: {\r\n\t\torder: '<'\r\n\t}\r\n});\r\n","//Call this to register our module to main application\r\nvar moduleName = \"storefront.account\";\r\n\r\nif (storefrontAppDependencies !== undefined) {\r\n    storefrontAppDependencies.push(moduleName);\r\n}\r\nangular.module(moduleName, ['ngResource', 'ngComponentRouter', /*'credit-cards', */'pascalprecht.translate', 'ngSanitize', 'storefrontApp', 'satellizer'])\r\n\r\n.config(['$translateProvider', function ($translateProvider) {\r\n    $translateProvider.useSanitizeValueStrategy('sanitizeParameters');\r\n    $translateProvider.useUrlLoader(BASE_URL + 'themes/localization.json');\r\n    $translateProvider.preferredLanguage('en');\r\n}])\r\n\r\n.run(['$templateCache', function ($templateCache) {\r\n    // cache application level templates\r\n    $templateCache.put('pagerTemplate.html', '<uib-pagination boundary-links=\"true\" max-size=\"$ctrl.pageSettings.numPages\" items-per-page=\"$ctrl.pageSettings.itemsPerPageCount\" total-items=\"$ctrl.pageSettings.totalItems\" ng-model=\"$ctrl.pageSettings.currentPage\" ng-change=\"$ctrl.pageSettings.pageChanged()\" class=\"pagination-sm\" previous-text=\"&lsaquo;\" next-text=\"&rsaquo;\" first-text=\"&laquo;\" last-text=\"&raquo;\"></uib-pagination>');\r\n}])\r\n\r\n.value('$routerRootComponent', 'vcAccountManager')\r\n\r\n.component('vcAccountManager', {\r\n    templateUrl: \"account-manager.tpl\",\r\n    bindings: {\r\n        baseUrl: '<',\r\n        customer: '<'\r\n    },\r\n    $routeConfig: [\r\n         { path: '/orders/...', name: 'Orders', component: 'vcAccountOrders'},\r\n         { path: '/subscriptions/...', name: 'Subscriptions', component: 'vcAccountSubscriptions' },\r\n         { path: '/quotes', name: 'Quotes', component: 'vcAccountQuotes' },\r\n         { path: '/profile', name: 'Profile', component: 'vcAccountProfileUpdate', useAsDefault: true },\r\n         { path: '/addresses', name: 'Addresses', component: 'vcAccountAddresses' },\r\n         { path: '/changePassword', name: 'PasswordChange', component: 'vcAccountPasswordChange' },\r\n         { path: '/companyInfo', name: 'CompanyInfo', component: 'vcAccountCompanyInfo' },\r\n         { path: '/companyMembers/...', name: 'CompanyMembers', component: 'vcAccountCompanyMembers' },\r\n         { path: '/wishlist', name: 'WishList', component: 'vcAccountLists' }\r\n    ],\r\n    controller: ['$scope', '$timeout', 'storefront.accountApi', 'storefrontApp.mainContext', 'authService', 'storefront.corporateAccountApi', 'loadingIndicatorService', function ($scope, $timeout, accountApi, mainContext, authService, corporateAccountApi, loader) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n\r\n        $ctrl.getQuotes = function (pageNumber, pageSize, sortInfos, callback) {\r\n            loader.wrapLoading(function () {\r\n                return accountApi.getQuotes({ pageNumber: pageNumber, pageSize: pageSize, sortInfos: sortInfos }, callback).$promise;\r\n            });\r\n        };\r\n\r\n        $ctrl.updateProfile = function (updateRequest) {\r\n            loader.wrapLoading(function () {\r\n                return accountApi.updateAccount(updateRequest, mainContext.getCustomer).$promise;\r\n            });\r\n        };\r\n\r\n        $ctrl.updateAddresses = function (data) {\r\n            return loader.wrapLoading(function () {\r\n                return accountApi.updateAddresses(data, mainContext.getCustomer).$promise;\r\n            });\r\n        };\r\n\r\n        $ctrl.availCountries = accountApi.getCountries();\r\n\r\n        $ctrl.getCountryRegions = function (country) {\r\n            return accountApi.getCountryRegions(country).$promise;\r\n        };\r\n\r\n        $ctrl.changePassword = function (changePasswordData) {\r\n            return loader.wrapLoading(function () {\r\n                return accountApi.changePassword(changePasswordData).$promise;\r\n            });\r\n        };\r\n\r\n        $scope.$watch(function() {\r\n            return mainContext.customer;\r\n        }, function (customer) {\r\n            if (customer) {\r\n                loader.wrapLoading(function () {\r\n                    return corporateAccountApi.getCompanyMember({ id: customer.id }, function (member) {\r\n                        customer.companyId = _.first(member.organizations);\r\n                        customer.email = _.first(member.emails);\r\n                    }).$promise;\r\n                });\r\n                authService.fillAuthData();\r\n            }\r\n        });\r\n\r\n        $scope.$on('loginStatusChanged', function(){\r\n            $timeout(function(){\r\n                $(\".nav *:hidden\").parent().prev().find(\".nav-title\").hide();\r\n            });\r\n        });\r\n    }]\r\n})\r\n\r\n.service('confirmService', ['$q', function ($q) {\r\n    this.confirm = function (message) {\r\n        return $q.when(window.confirm(message || 'Is it OK?'));\r\n    };\r\n}])\r\n\r\n.factory('loadingIndicatorService', function () {\r\n    var retVal = {\r\n        isLoading: false,\r\n        wrapLoading: function (func) {\r\n            retVal.isLoading = true;\r\n            return func().then(function (result) {\r\n                retVal.isLoading = false;\r\n                return result;\r\n            },\r\n            function () { retVal.isLoading = false; });\r\n        }\r\n    };\r\n\r\n    return retVal;\r\n});\r\n","angular.module('storefront.account')\r\n.component('vcAccountAddresses', {\r\n    templateUrl: \"themes/assets/account-addresses.tpl.liquid\",\r\n    require: {\r\n        accountManager: '^vcAccountManager'\r\n    },\r\n    controller: ['storefrontApp.mainContext', 'confirmService', '$translate', '$scope', 'storefront.corporateAccountApi', 'storefront.corporateApiErrorHelper', 'loadingIndicatorService', function (mainContext, confirmService, $translate, $scope, corporateAccountApi, corporateApiErrorHelper, loader) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n        \r\n        $scope.$watch(\r\n            function () { return mainContext.customer; },\r\n            function (customer) {\r\n                if (customer) {\r\n                    loader.wrapLoading(function() {\r\n                        return corporateAccountApi.getCompanyMember({ id: customer.id }, function (member) {\r\n                            $ctrl.currentMember = member;\r\n                        }).$promise;\r\n                    });\r\n                }\r\n            });\r\n\r\n        $ctrl.addNewAddress = function () {\r\n            if (_.last(components).validate()) {\r\n                $ctrl.currentMember.addresses.push($ctrl.newAddress);\r\n                $ctrl.newAddress = null;\r\n                $ctrl.updateCompanyMember($ctrl.currentMember);\r\n            }\r\n        };\r\n\r\n        $ctrl.submit = function () {\r\n            if (components[$ctrl.editIdx].validate()) {\r\n                angular.copy($ctrl.editItem, $ctrl.currentMember.addresses[$ctrl.editIdx]);\r\n                $ctrl.updateCompanyMember($ctrl.currentMember, $ctrl.cancel);\r\n            }\r\n        };\r\n\r\n        $ctrl.cancel = function () {\r\n            $ctrl.editIdx = -1;\r\n            $ctrl.editItem = null;\r\n        };\r\n\r\n        $ctrl.edit = function ($index) {\r\n            $ctrl.editIdx = $index;\r\n            $ctrl.editItem = angular.copy($ctrl.currentMember.addresses[$ctrl.editIdx]);\r\n        };\r\n\r\n        $ctrl.delete = function ($index) {\r\n            var showDialog = function (text) {\r\n                confirmService.confirm(text).then(function (confirmed) {\r\n                    if (confirmed) {\r\n                        $ctrl.currentMember.addresses.splice($index, 1);\r\n                        $ctrl.updateCompanyMember($ctrl.currentMember);\r\n                    }\r\n                });\r\n            };\r\n\r\n            $translate('customer.addresses.delete_confirm').then(showDialog, showDialog);\r\n        };\r\n\r\n        $ctrl.updateCompanyMember = function (companyMember, handler) {\r\n            return loader.wrapLoading(function () {\r\n                return corporateAccountApi.updateCompanyMember(companyMember, handler, function (response) {\r\n                    corporateApiErrorHelper.clearErrors($scope);\r\n                }).$promise;\r\n            });\r\n        };\r\n\r\n        var components = [];\r\n        $ctrl.addComponent = function (component) {\r\n            components.push(component);\r\n        };\r\n        $ctrl.removeComponent = function (component) {\r\n            components = _.without(components, component);\r\n        };\r\n    }]\r\n});\r\n","angular.module('storefront.account')\r\n.component('vcAccountCompanyInfo', {\r\n    templateUrl: \"themes/assets/account-company-info.tpl.liquid\",\r\n    require: {\r\n        accountManager: '^vcAccountManager'\r\n    },\r\n    controller: ['storefrontApp.mainContext', '$scope', '$translate', 'storefront.corporateAccountApi', 'storefront.corporateApiErrorHelper', 'loadingIndicatorService', 'confirmService', function (mainContext, $scope, $translate, corporateAccountApi, corporateApiErrorHelper, loader, confirmService) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n\r\n        $scope.$watch(\r\n            function () { return mainContext.customer.companyId; },\r\n            function (companyId) {\r\n                if (companyId) {\r\n                    loader.wrapLoading(function () {\r\n                        return corporateAccountApi.getCompanyById({ id: companyId }, function (company) {\r\n                            $ctrl.company = company;\r\n                        }).$promise;\r\n                    });\r\n                }\r\n            }\r\n        );\r\n\r\n        $ctrl.updateCompanyInfo = function (company) {\r\n            return loader.wrapLoading(function () {\r\n                return corporateAccountApi.updateCompany(company, function(response) {\r\n                    corporateApiErrorHelper.clearErrors($scope);\r\n                }, function (rejection){\r\n                    corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                }).$promise;\r\n            });\r\n        };\r\n\r\n        $ctrl.addNewAddress = function () {\r\n            if (_.last(components).validate()) {\r\n                $ctrl.company.addresses.push($ctrl.newAddress);\r\n                $ctrl.newAddress = null;\r\n                $ctrl.updateCompanyInfo($ctrl.company);\r\n            }\r\n        };\r\n\r\n        $ctrl.submitCompanyAddress = function () {\r\n            if (components[$ctrl.editIdx].validate()) {\r\n                angular.copy($ctrl.editItem, $ctrl.company.addresses[$ctrl.editIdx]);\r\n                $ctrl.updateCompanyInfo($ctrl.company).then($ctrl.cancel);\r\n            }\r\n        };\r\n\r\n        $ctrl.cancel = function () {\r\n            $ctrl.editIdx = -1;\r\n            $ctrl.editItem = null;\r\n        };\r\n\r\n        $ctrl.edit = function ($index) {\r\n            $ctrl.editIdx = $index;\r\n            $ctrl.editItem = angular.copy($ctrl.company.addresses[$ctrl.editIdx]);\r\n        };\r\n\r\n        $ctrl.delete = function ($index) {\r\n            var showDialog = function (text) {\r\n                confirmService.confirm(text).then(function (confirmed) {\r\n                    if (confirmed) {\r\n                        $ctrl.company.addresses.splice($index, 1);\r\n                        $ctrl.updateCompanyInfo($ctrl.company);\r\n                    }\r\n                });\r\n            };\r\n\r\n            $translate('customer.addresses.delete_confirm').then(showDialog, showDialog);\r\n        };\r\n\r\n        var components = [];\r\n        $ctrl.addComponent = function (component) {\r\n            components.push(component);\r\n        };\r\n        $ctrl.removeComponent = function (component) {\r\n            components = _.without(components, component);\r\n        };\r\n    }]\r\n});\r\n","angular.module('storefront.account')\r\n.component('vcAccountCompanyMembers', {\r\n    templateUrl: \"themes/assets/account-company-members.tpl.liquid\",\r\n    $routeConfig: [\r\n     { path: '/', name: 'MemberList', component: 'vcAccountCompanyMembersList', useAsDefault: true },\r\n     { path: '/:member', name: 'MemberDetail', component: 'vcAccountCompanyMemberDetail' }\r\n    ],\r\n    controller: ['storefront.accountApi', function (accountApi) {\r\n        var $ctrl = this;\r\n    }]\r\n})\r\n\r\n.component('vcAccountCompanyMembersList', {\r\n    templateUrl: \"account-company-members-list.tpl\",\r\n    bindings: { $router: '<' },\r\n    controller: ['storefrontApp.mainContext', '$scope', 'storefront.corporateAccountApi', 'storefront.corporateRegisterApi', 'storefront.corporateApiErrorHelper', 'roleService', 'loadingIndicatorService', 'confirmService', '$location', '$translate', function (mainContext, $scope, corporateAccountApi, corporateRegisterApi, corporateApiErrorHelper, roleService, loader, confirmService, $location, $translate) {\r\n        var $ctrl = this;\r\n        $ctrl.currentMemberId = mainContext.customer.id;\r\n        $ctrl.newMemberComponent = null;\r\n        $ctrl.loader = loader;\r\n        $ctrl.pageSettings = { currentPage: 1, itemsPerPageCount: 5, numPages: 10 };\r\n        $ctrl.pageSettings.pageChanged = function () {\r\n            loader.wrapLoading(function () {\r\n                return corporateAccountApi.getCompanyMembers({\r\n                    memberId: mainContext.customer.companyId,\r\n                    skip: ($ctrl.pageSettings.currentPage - 1) * $ctrl.pageSettings.itemsPerPageCount,\r\n                    take: $ctrl.pageSettings.itemsPerPageCount,\r\n                    sortInfos: $ctrl.sortInfos\r\n                }, function (data) {\r\n                    $ctrl.entries = data.results;\r\n                    $ctrl.pageSettings.totalItems = data.totalCount;\r\n\r\n                    $scope.$watch(function(){\r\n                        return roleService.available;\r\n                    }, function() {\r\n                        angular.forEach($ctrl.entries, function(member){\r\n                            var role = roleService.get(member.securityAccounts);\r\n                            member.role = role ? role.name : null;\r\n                        });\r\n                    });\r\n                }).$promise;\r\n            });\r\n        };\r\n        \r\n        $ctrl.addNewMemberFieldsConfig =[\r\n            {\r\n                field: 'CompanyName',\r\n                disabled: true,\r\n                visible: false,\r\n                required: false\r\n            },\r\n            {\r\n                field: 'Email',\r\n                disabled: false,\r\n                visible: true,\r\n                required: true\r\n            },\r\n            {\r\n                field: 'UserName',\r\n                disabled: false,\r\n                visible: true\r\n            },\r\n            {\r\n                field: 'Password',\r\n                disabled: false,\r\n                visible:  true\r\n            },\r\n            {\r\n                field: 'Roles',\r\n                disabled: false,\r\n                visible:  true,\r\n                required: true\r\n            }\r\n        ];\r\n        \r\n        $scope.init = function(storeId, cultureName, registrationUrl){\r\n            $ctrl.storeId = storeId;\r\n            $ctrl.cultureName = cultureName;\r\n            $ctrl.registrationUrl = registrationUrl;\r\n        };\r\n\r\n        this.$routerOnActivate = function (next) {\r\n            $ctrl.pageSettings.currentPage = next.params.pageNumber || $ctrl.pageSettings.currentPage;\r\n        };\r\n\r\n        $scope.$watch(\r\n            function () { return mainContext.customer.companyId; },\r\n            function (companyId) {\r\n                if (companyId) {\r\n                    $ctrl.pageSettings.pageChanged();\r\n                }\r\n            }\r\n        );\r\n\r\n        $ctrl.inviteEmailsValidationPattern = new RegExp(/((^|((?!^)([,;]|\\r|\\r\\n|\\n)))([a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*))+$/);\r\n        $ctrl.invite = function () {\r\n            $ctrl.inviteInfo.emails = $ctrl.inviteInfo.rawEmails.split(/[,;]|\\r|\\r\\n|\\n/g);\r\n            loader.wrapLoading(function(){\r\n              return corporateAccountApi.invite({\r\n                storeId: $ctrl.storeId,\r\n                companyId: mainContext.customer.companyId,\r\n                emails: $ctrl.inviteInfo.emails,\r\n                adminName: mainContext.customer.fullName,\r\n                adminEmail: mainContext.customer.email,\r\n                message: $ctrl.inviteInfo.message,\r\n                language: $ctrl.cultureName,\r\n                callbackUrl: $location.protocol() + \"://\" + $location.host() + \":\" + $location.port() + $ctrl.registrationUrl\r\n              }, function(response) {\r\n                  $ctrl.cancel();\r\n                  $ctrl.pageSettings.pageChanged();\r\n                  corporateApiErrorHelper.clearErrors($scope);\r\n              }, function (rejection) {\r\n                  corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                }).$promise;\r\n            });\r\n        };\r\n\r\n        $ctrl.addNewMember = function () {\r\n            if ($ctrl.newMemberComponent.validate()) {\r\n                $ctrl.newMember.companyId = mainContext.customer.companyId;\r\n                $ctrl.newMember.role = $ctrl.newMember.role.name;\r\n                $ctrl.newMember.storeId = $ctrl.storeId;\r\n\r\n                loader.wrapLoading(function () {\r\n                    return corporateRegisterApi.registerMember($ctrl.newMember, function(response) {\r\n                        $ctrl.cancel();\r\n                        $ctrl.pageSettings.currentPage = 1;\r\n                        $ctrl.pageSettings.pageChanged();\r\n                        corporateApiErrorHelper.clearErrors($scope);\r\n                    }, function (rejection){\r\n                        corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                    }).$promise;\r\n                });\r\n            }\r\n        };\r\n\r\n        $ctrl.cancel = function () {\r\n            $ctrl.inviteInfo = null;\r\n            $ctrl.newMember = null;\r\n        };\r\n\r\n        $ctrl.changeStatus = function (memberId) {\r\n            loader.wrapLoading(function () {\r\n                return corporateAccountApi.getCompanyMember({ id: memberId }, function (member) {\r\n                    member.isActive = !member.isActive;\r\n                    loader.wrapLoading(function () {\r\n                        return corporateAccountApi.updateCompanyMember(companyMember, function(response) {\r\n                            $ctrl.pageSettings.pageChanged();\r\n                            corporateApiErrorHelper.clearErrors($scope);\r\n                        }, function (rejection){\r\n                            corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                        }).$promise;\r\n                    });\r\n                }).$promise;\r\n            });\r\n        };\r\n\r\n        $ctrl.edit = function (memberId) {\r\n            this.$router.navigate(['MemberDetail', {member: memberId, pageNumber: $ctrl.pageSettings.currentPage}]);\r\n        }\r\n\r\n        $ctrl.delete = function (memberId) {\r\n            var showDialog = function (text) {\r\n                confirmService.confirm(text).then(function (confirmed) {\r\n                    if (confirmed) {\r\n                        loader.wrapLoading(function () {\r\n                            return corporateAccountApi.deleteCompanyMember({ ids: memberId }, function(response) {\r\n                                $ctrl.pageSettings.pageChanged();\r\n                                corporateApiErrorHelper.clearErrors($scope);\r\n                            }, function (rejection){\r\n                                corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                            }).$promise;\r\n                        });\r\n                    }\r\n                });\r\n            };\r\n\r\n            $translate('customer.edit_company_members.delete_confirm').then(showDialog, showDialog);\r\n        };\r\n\r\n        $ctrl.validate = function (){\r\n            $ctrl.inviteForm.$setSubmitted();\r\n            return $ctrl.inviteForm.valid;\r\n        };\r\n\r\n        $ctrl.showActions = function (member) {\r\n            return member.id != mainContext.customer.id;\r\n        }\r\n    }]\r\n})\r\n\r\n.component('vcAccountCompanyMemberDetail', {\r\n    templateUrl: \"account-company-members-detail.tpl\",\r\n    require: {\r\n        accountManager: '^vcAccountManager'\r\n    },\r\n    controller: ['$q', '$rootScope', '$scope', '$window', 'roleService', 'storefront.corporateAccountApi', 'storefront.corporateApiErrorHelper', 'loadingIndicatorService', 'confirmService', function ($q, $rootScope, $scope, $window, roleService, corporateAccountApi, corporateApiErrorHelper, loader, confirmService) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n        $ctrl.fieldsConfig =[\r\n            {\r\n                field: 'CompanyName',\r\n                disabled: true,\r\n                visible: false,\r\n                required: false\r\n            },\r\n            {\r\n                field: 'Email',\r\n                disabled: false,\r\n                visible: true,\r\n                required: true\r\n            },\r\n            {\r\n                field: 'UserName',\r\n                disabled: true,\r\n                visible: false\r\n            },\r\n            {\r\n                field: 'Password',\r\n                disabled: true,\r\n                visible: false\r\n            },\r\n            {\r\n                field: 'Roles',\r\n                disabled: false,\r\n                visible:  true\r\n            }\r\n        ];\r\n\r\n        $ctrl.memberComponent = null;\r\n        \r\n        $scope.init = function(storeId){\r\n            $ctrl.storeId = storeId;\r\n        };\r\n\r\n        function refresh() {\r\n            loader.wrapLoading(function () {\r\n                return corporateAccountApi.getCompanyMember({ id: $ctrl.memberNumber }, function (member) {\r\n                    $ctrl.member = {\r\n                        id: member.id,\r\n                        firstName: member.firstName,\r\n                        lastName: member.lastName,\r\n                        email: _.first(member.emails),\r\n                        organizations: member.organizations,\r\n                        title: member.title,\r\n                        securityAccounts: member.securityAccounts\r\n                    };\r\n                }).$promise;\r\n            });\r\n        }\r\n\r\n        this.$routerOnActivate = function (next) {\r\n            $ctrl.pageNumber = next.params.pageNumber || 1;\r\n            $ctrl.memberNumber = next.params.member;\r\n\r\n            refresh();\r\n        };\r\n\r\n        $ctrl.submitMember = function () {\r\n            if ($ctrl.memberComponent.validate()) {\r\n                loader.wrapLoading(function () {\r\n                    $ctrl.member.fullName = $ctrl.member.firstName + ' ' + $ctrl.member.lastName;\r\n                    $ctrl.member.emails = [ $ctrl.member.email ];\r\n                    return $q.all([\r\n                        roleService.set($ctrl.member.securityAccounts, $ctrl.member.role),\r\n                        corporateAccountApi.updateCompanyMember($ctrl.member, function(response) {\r\n                            corporateApiErrorHelper.clearErrors($scope);\r\n                        }, function (rejection){\r\n                            corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                        }).$promise\r\n                    ]);\r\n                });\r\n            };\r\n        };\r\n    }]\r\n});\r\n","angular.module('storefront.account')\r\n    .component('vcAccountLists', {\r\n        templateUrl: \"themes/assets/js/account/account-lists.tpl.liquid\",\r\n        $routeConfig: [\r\n            { path: '/', name: 'WishList', component: 'vcAccountLists', useAsDefault: true }\r\n        ],\r\n        controller: ['listService', '$rootScope', 'cartService', '$translate', 'loadingIndicatorService', '$timeout', function (listService, $rootScope, cartService, $translate, loader, $timeout) {\r\n            var $ctrl = this;\r\n            $ctrl.loader = loader;\r\n            $ctrl.selectedList = {};\r\n\r\n            $ctrl.initialize = function (lists) {\r\n                if (lists && lists.length > 0) {\r\n                    $ctrl.lists = lists;\r\n                    $ctrl.selectList(lists[0]);\r\n                    angular.forEach($ctrl.lists, function (list) {\r\n                        var titleKey = 'wishlist.general.' + list.name + '_list_title';\r\n                        var descriptionKey = 'wishlist.general.' + list.name + '_list_description';\r\n                        $translate([titleKey, descriptionKey]).then(function (translations) {\r\n                            list.title = translations[titleKey];\r\n                            list.description = translations[descriptionKey];\r\n                        }, function (translationIds) {\r\n                            list.title = translationIds[titleKey];\r\n                            list.description = translationIds[descriptionKey];\r\n                        });\r\n                    });\r\n                }\r\n            };\r\n\r\n\r\n            $ctrl.selectList = function (list) {\r\n                $ctrl.selectedList = list;\r\n                loader.wrapLoading(function () {\r\n                    return listService.getWishlist(list.name).then(function (response) {\r\n                        $ctrl.selectedList.items = response.data.items;                     \r\n                    });\r\n                });\r\n            };\r\n\r\n            $ctrl.removeLineItem = function (lineItem, list) {  \r\n                loader.wrapLoading(function () {\r\n                    return listService.removeLineItem(lineItem.id, list.name).then(function (response) {\r\n                        $ctrl.selectList(list);\r\n                    });\r\n                });\r\n            };\r\n\r\n            $ctrl.addToCart = function (lineItem) {\r\n                loader.wrapLoading(function () {\r\n                    return cartService.addLineItem(lineItem.productId, 1).then(function (response) {\r\n                        $ctrl.productAdded = true;\r\n                        $timeout(function () {\r\n                            $ctrl.productAdded = false;\r\n                        }, 2000);\r\n                    });\r\n                });\r\n            }\r\n        }]\r\n    });\r\n"," var storefrontApp = angular.module('storefrontApp');\r\n\r\n storefrontApp\r\n .controller('accountLoginController', ['$scope', 'authService', function ($scope, authService) {\r\n     $scope.login = function ($event) {\r\n         if (!$event || $event.keyCode === 13){\r\n             var submit = function(){\r\n                angular.element(document.querySelector('#customer_login')).submit();\r\n            };\r\n            // submit form even when error occurs\r\n            authService.login($scope.userName, $scope.password).then(submit, submit);\r\n         }\r\n     };\r\n }]);","angular.module('storefront.account')\r\n.component('vcAccountOrders', {\r\n    templateUrl: \"themes/assets/js/account/account-orders.tpl.liquid\",\r\n    $routeConfig: [\r\n     { path: '/', name: 'OrderList', component: 'vcAccountOrdersList', useAsDefault: true },\r\n     { path: '/:number', name: 'OrderDetail', component: 'vcAccountOrderDetail' }\r\n    ],\r\n    controller: ['orderHelper', function (orderHelper) {\r\n        var $ctrl = this;\r\n        $ctrl.orderHelper = orderHelper;\r\n    }]\r\n})\r\n\r\n.component('vcAccountOrdersList', {\r\n    templateUrl: \"account-orders-list.tpl\",\r\n    controller: ['storefront.orderApi', 'loadingIndicatorService', function (orderApi, loader) {\r\n        var ctrl = this;\r\n        ctrl.loader = loader;\r\n        ctrl.pageSettings = { currentPage: 1, itemsPerPageCount: 5, numPages: 10 };\r\n        ctrl.pageSettings.pageChanged = function () {\r\n            loader.wrapLoading(function () {\r\n                return orderApi.search({\r\n                    pageNumber: ctrl.pageSettings.currentPage,\r\n                    pageSize: ctrl.pageSettings.itemsPerPageCount,\r\n                    sortInfos: ctrl.sortInfos\r\n                }, function (data) {\r\n                    ctrl.entries = data.results;\r\n                    ctrl.pageSettings.totalItems = data.totalCount;\r\n                }).$promise;\r\n            });\r\n        };\r\n\r\n        this.$routerOnActivate = function (next) {\r\n            ctrl.pageSettings.currentPage = next.params.pageNumber || ctrl.pageSettings.currentPage;\r\n            ctrl.pageSettings.pageChanged();\r\n        };\r\n    }]\r\n})\r\n\r\n.component('vcAccountOrderDetail', {\r\n    templateUrl: \"account-order-detail.tpl\",\r\n    require: {\r\n        accountManager: '^vcAccountManager'\r\n    },\r\n    controller: ['storefront.orderApi', '$rootScope', '$window', 'loadingIndicatorService', 'confirmService', 'orderHelper', function (orderApi, $rootScope, $window, loader, confirmService, orderHelper) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n        $ctrl.hasPhysicalProducts = true;\r\n\r\n        function refresh() {\r\n            loader.wrapLoading(function () {\r\n                $ctrl.order = orderApi.get({ number: $ctrl.orderNumber }, function (result) {\r\n                    $ctrl.isShowPayment = false;\r\n                    var lastPayment = _.last(_.sortBy($ctrl.order.inPayments, 'createdDate'));\r\n                    $ctrl.billingAddress = (lastPayment && lastPayment.billingAddress) ||\r\n                            _.findWhere($ctrl.order.addresses, { type: 'billing' }) ||\r\n                            _.first($ctrl.order.addresses);\r\n                    $ctrl.amountToPay = orderHelper.getNewPayment($ctrl.order).sum.amount;\r\n\r\n                    if ($ctrl.amountToPay > 0) {\r\n                        $ctrl.billingAddressEqualsShipping = true;\r\n                        loadPromise = orderApi.getNewPaymentData({ number: $ctrl.orderNumber }, function (result) {\r\n                            //$ctrl.order = result.order;\r\n                            configurePayment(result.paymentMethods, result.payment);\r\n                        }).$promise;\r\n                    }\r\n                });\r\n                return $ctrl.order.$promise;\r\n            });\r\n        }\r\n\r\n        this.$routerOnActivate = function (next) {\r\n            $ctrl.pageNumber = next.params.pageNumber || 1;\r\n            $ctrl.orderNumber = next.params.number;\r\n\r\n            refresh();\r\n        };\r\n\r\n        $ctrl.getInvoicePdf = function () {\r\n            var url = $window.BASE_URL + 'storefrontapi/orders/' + $ctrl.orderNumber + '/invoice';\r\n            $window.open(url, '_blank');\r\n        }\r\n\r\n        $ctrl.showPayment = function () {\r\n            loadPromise.then(function (result) {\r\n                $ctrl.isShowPayment = true;\r\n            });\r\n        };\r\n\r\n        var loadPromise;\r\n        $ctrl.getAvailPaymentMethods = function () {\r\n            return loadPromise.then(function (result) {\r\n                var preselectedMaymentMethod;\r\n                if ($ctrl.payment.gatewayCode) {\r\n                    preselectedMaymentMethod = _.findWhere(result.paymentMethods, { code: $ctrl.payment.gatewayCode });\r\n                }\r\n\r\n                return preselectedMaymentMethod ? [preselectedMaymentMethod] : result.paymentMethods;\r\n            });\r\n        };\r\n\r\n        $ctrl.selectPaymentMethod = function (paymentMethod) {\r\n            angular.extend($ctrl.payment, paymentMethod);\r\n            $ctrl.payment.gatewayCode = paymentMethod.code;\r\n            // $ctrl.payment.sum = angular.copy($ctrl.order.total);\r\n            // $ctrl.payment.sum.amount += paymentMethod.totalWithTax.amount;\r\n\r\n            $ctrl.validate();\r\n        };\r\n\r\n        $ctrl.validate = function () {\r\n            $ctrl.isValid = $ctrl.payment &&\r\n                $ctrl.payment.gatewayCode &&\r\n                $ctrl.payment.sum && $ctrl.payment.sum.amount > 0 &&\r\n                _.every(components, function (x) {\r\n                    return typeof x.validate !== \"function\" || x.validate();\r\n                });\r\n\r\n            return $ctrl.isValid;\r\n        };\r\n\r\n        $ctrl.submit = function () {\r\n            if ($ctrl.validate()) {\r\n                loader.wrapLoading(function () {\r\n                    $ctrl.payment.bankCardInfo = $ctrl.paymentMethod.card;\r\n                    return orderApi.addOrUpdatePayment({ number: $ctrl.orderNumber }, $ctrl.payment, function (payment) {\r\n                        orderApi.processPayment({ number: $ctrl.orderNumber, paymentNumber: payment.number }, $ctrl.paymentMethod.card, function (result) {\r\n                            var orderProcessingResult = result.orderProcessingResult;\r\n                            var paymentMethod = result.paymentMethod;\r\n\r\n                            if (!orderProcessingResult.isSuccess) {\r\n                                $rootScope.$broadcast('storefrontError', {\r\n                                    type: 'error',\r\n                                    title: ['Error in new payment processing: ', orderProcessingResult.error, 'New Payment status: ' + orderProcessingResult.newPaymentStatus].join(' '),\r\n                                    message: orderProcessingResult.error,\r\n                                });\r\n                                return;\r\n                            }\r\n\r\n                            if (paymentMethod.paymentMethodType && paymentMethod.paymentMethodType.toLowerCase() === 'preparedform' && orderProcessingResult.htmlForm) {\r\n                                outerRedirect($ctrl.accountManager.baseUrl + 'cart/checkout/paymentform?orderNumber=' + $ctrl.orderNumber);\r\n                            } else if (paymentMethod.paymentMethodType && paymentMethod.paymentMethodType.toLowerCase() === 'redirection' && orderProcessingResult.redirectUrl) {\r\n                                outerRedirect(orderProcessingResult.redirectUrl);\r\n                            } else {\r\n                                if ($ctrl.accountManager.customer.isRegisteredUser) {\r\n                                    refresh();\r\n                                } else {\r\n                                    outerRedirect($ctrl.accountManager.baseUrl + 'cart/thanks/' + $ctrl.orderNumber);\r\n                                }\r\n                            }\r\n                        })\r\n                    }).$promise;\r\n                });\r\n            }\r\n        };\r\n\r\n        $ctrl.cancel = function () {\r\n            confirmService.confirm('Cancel this payment?').then(function (confirmed) {\r\n                if (confirmed) {\r\n                    loader.wrapLoading(function () {\r\n                        return orderApi.cancelPayment({ number: $ctrl.orderNumber, paymentNumber: $ctrl.payment.number }, null, refresh).$promise;\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        var components = [];\r\n        $ctrl.addComponent = function (component) {\r\n            components.push(component);\r\n        };\r\n        $ctrl.removeComponent = function (component) {\r\n            components = _.without(components, component);\r\n        };\r\n\r\n        function configurePayment(paymentMethods, newPaymentTemplate) {\r\n            $ctrl.payment = orderHelper.getNewPayment($ctrl.order, paymentMethods, newPaymentTemplate);\r\n            $ctrl.payment.purpose = $ctrl.payment.purpose || 'Repeated payment';\r\n            $ctrl.amountToPay = $ctrl.payment.sum.amount;\r\n\r\n            $ctrl.canCancelPayment = $ctrl.payment.id !== newPaymentTemplate.id;\r\n            if ($ctrl.canCancelPayment) {\r\n                $ctrl.selectPaymentMethod(_.findWhere(paymentMethods, { code: $ctrl.payment.gatewayCode }));\r\n            }\r\n\r\n            if (!_.some($ctrl.order.shipments)) {\r\n                $ctrl.hasPhysicalProducts = false;\r\n                $ctrl.billingAddressEqualsShipping = false;\r\n            }\r\n        }\r\n\r\n        function outerRedirect(absUrl) {\r\n            $window.location.href = absUrl;\r\n        };\r\n    }]\r\n})\r\n\r\n.factory('orderHelper', function () {\r\n    var retVal = {\r\n        getNewPayment: function (order, paymentMethods, newPaymentTemplate) {\r\n            var retVal;\r\n            var paidPayments = _.filter(order.inPayments, function (x) {\r\n                return x.status === 'Paid';\r\n            });\r\n            var paidAmount = _.reduce(paidPayments, function (memo, num) { return memo + num.sum.amount; }, 0);\r\n            var amountToPay = order.total.amount - paidAmount;\r\n\r\n            var pendingPayments = _.filter(order.inPayments, function (x) {\r\n                return !x.isCancelled &&\r\n                        (x.status === 'New' || x.status === 'Pending') &&\r\n                        x.sum.amount > 0; // && x.sum.amount === amountToPay;\r\n            });\r\n            var pendingPayment = _.last(_.sortBy(pendingPayments, 'createdDate'));\r\n            if (pendingPayment && (!paymentMethods || _.findWhere(paymentMethods, { code: pendingPayment.gatewayCode }))) {\r\n                retVal = pendingPayment;\r\n            } else {\r\n                newPaymentTemplate = newPaymentTemplate || { sum: {} };\r\n                newPaymentTemplate.sum.amount = amountToPay;\r\n                retVal = newPaymentTemplate;\r\n            }\r\n\r\n            return retVal;\r\n        }\r\n    };\r\n\r\n    return retVal;\r\n})\r\n\r\n.filter('orderToSummarizedStatusLabel', ['orderHelper', function (orderHelper) {\r\n    return function (order) {\r\n        var retVal = order.status || 'New';\r\n\r\n        var found = _.findWhere(orderHelper.statusLabels, { status: retVal.toLowerCase() });\r\n        if (found) {\r\n            retVal = found.label;\r\n        }\r\n\r\n        return retVal;\r\n    };\r\n}])\r\n;\r\n","angular.module('storefront.account')\r\n.component('vcAccountPasswordChange', {\r\n    templateUrl: \"themes/assets/js/account/account-password-change.tpl.liquid\",\r\n    require: {\r\n        accountManager: '^vcAccountManager'\r\n    },\r\n    controller: ['loadingIndicatorService', function (loader) {\r\n        var ctrl = this;\r\n        ctrl.loader = loader;\r\n        ctrl.passwordChangeData = {};\r\n\r\n        ctrl.submit = function () {\r\n            // validation\r\n            ctrl.errors = null;\r\n            ctrl.error = {};\r\n            var hasError = false;\r\n            var errorMsg;\r\n\r\n            errorMsg = ctrl.passwordChangeData.oldPassword === ctrl.passwordChangeData.newPassword;\r\n            ctrl.error.newPassword = errorMsg\r\n            hasError = hasError || errorMsg;\r\n\r\n            if (!hasError) {\r\n                errorMsg = ctrl.passwordChangeData.newPassword !== ctrl.passwordChangeData.newPassword2;\r\n                ctrl.error.newPassword2 = errorMsg;\r\n                hasError = hasError || errorMsg;\r\n            }\r\n\r\n            if (!hasError) {\r\n                ctrl.accountManager.changePassword(ctrl.passwordChangeData).then(function (result) {\r\n                    angular.extend(ctrl, result);\r\n                    ctrl.passwordChangeData = {};\r\n                    ctrl.form.$setPristine();\r\n                });\r\n            }\r\n        };\r\n\r\n        ctrl.setForm = function (frm) { ctrl.form = frm; };\r\n    }]\r\n});\r\n","angular.module('storefront.account')\r\n.component('vcAccountProfileUpdate', {\r\n    templateUrl: \"themes/assets/account-profile-update.tpl.liquid\",\r\n    require: {\r\n        accountManager: '^vcAccountManager'\r\n    },\r\n    controller: ['$q', '$scope', 'storefrontApp.mainContext', 'roleService', 'storefront.corporateAccountApi', 'storefront.corporateApiErrorHelper', 'loadingIndicatorService', function ($q, $scope, mainContext, roleService, corporateAccountApi, corporateApiErrorHelper, loader) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n\r\n        $scope.$watch(\r\n            function () { return mainContext.customer; },\r\n            function (customer) {\r\n                if (customer) {\r\n                    loader.wrapLoading(function() {\r\n                        return corporateAccountApi.getCompanyMember({ id: customer.id }, function(member) {\r\n                            $ctrl.member = {\r\n                                id: member.id,\r\n                                firstName: member.firstName,\r\n                                lastName: member.lastName,\r\n                                email: _.first(member.emails),\r\n                                organizations: member.organizations,\r\n                                title: member.title,\r\n                                addresses: member.addresses,\r\n                                securityAccounts: member.securityAccounts\r\n                            };\r\n                        }).$promise;\r\n                    });\r\n                }\r\n            });\r\n\r\n        $ctrl.submit = function () {\r\n            $ctrl.member.fullName = $ctrl.member.firstName + ' ' + $ctrl.member.lastName;\r\n            $ctrl.member.emails = [$ctrl.member.email];\r\n\r\n            return loader.wrapLoading(function () {\r\n                return corporateAccountApi.updateCompanyMember($ctrl.member, function(response) {\r\n                    corporateApiErrorHelper.clearErrors($scope);\r\n                }, function (rejection){\r\n                    corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                }).$promise;\r\n            });\r\n        };\r\n    }]\r\n});\r\n","angular.module('storefront.account')\r\n.component('vcAccountQuotes', {\r\n    templateUrl: \"themes/assets/js/account/account-quotes.tpl.liquid\",\r\n    require: {\r\n        accountManager: '^vcAccountManager'\r\n    },\r\n    controller: [function () {\r\n        var ctrl = this;\r\n        ctrl.pageSettings = { currentPage: 1, itemsPerPageCount: 5, numPages: 10 };\r\n        ctrl.pageSettings.pageChanged = function () {\r\n            ctrl.accountManager.getQuotes(ctrl.pageSettings.currentPage, ctrl.pageSettings.itemsPerPageCount, ctrl.sortInfos, function (data) {\r\n                ctrl.entries = data.results;\r\n                ctrl.pageSettings.totalItems = data.totalCount;\r\n            });\r\n        };\r\n        \r\n        this.$routerOnActivate = function (next) {\r\n            ctrl.pageSettings.currentPage = next.params.pageNumber || ctrl.pageSettings.currentPage;\r\n            ctrl.pageSettings.pageChanged();\r\n        };\r\n    }]\r\n});\r\n","var storefrontApp = angular.module('storefrontApp');\r\n\r\nstorefrontApp.controller('accountRegisterController', ['$q', '$scope', 'storefrontApp.mainContext', 'storefront.corporateRegisterApi', 'storefront.corporateApiErrorHelper', 'loadingIndicatorService',\r\n    function ($q, $scope, mainContext, corporateRegisterApi, corporateApiErrorHelper, loader) {\r\n\r\n    $scope.loader = loader;\r\n    $scope.memberComponent = null;\r\n    $scope.newMember = null;\r\n\r\n    $scope.registerMemberFieldsConfig = [\r\n        {\r\n            field: 'CompanyName',\r\n            disabled: false,\r\n            visible: true,\r\n            required: true\r\n        },\r\n        {\r\n            field: 'Email',\r\n            disabled: false,\r\n            visible: true,\r\n            required: true\r\n        },\r\n        {\r\n            field: 'UserName',\r\n            disabled: false,\r\n            visible: true,\r\n            required: true\r\n        },\r\n        {\r\n            field: 'Password',\r\n            disabled: false,\r\n            visible:  true,\r\n            required: true\r\n        }\r\n    ];\r\n\r\n    function getParams() {\r\n        var params = window.location.search.substring(1).split(\"&\"), result = {}, param, i;\r\n        for (i in params) {\r\n            if (params.hasOwnProperty(i)) {\r\n                if (params[i] === \"\") continue;\r\n\r\n                param = params[i].split(\"=\");\r\n                result[decodeURIComponent(param[0])] = decodeURIComponent(param[1]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    $scope.init = function (storeId) {\r\n        $scope.newMember = {};\r\n        $scope.newMember.storeId = storeId;\r\n\r\n        $scope.complete = false;\r\n\r\n        var invite = getParams().invite;\r\n        if (invite) {\r\n            $scope.registerMemberFieldsConfig[0] = {\r\n                field: 'CompanyName',\r\n                disabled: true,\r\n                visible: true,\r\n                required: true\r\n            };\r\n            $scope.registerMemberFieldsConfig[1] = {\r\n                field: 'Email',\r\n                disabled: true,\r\n                visible: true,\r\n                required: true\r\n            };\r\n\r\n            $scope.newMember.invite = invite;\r\n            $scope.loader.wrapLoading(function() {\r\n                return corporateRegisterApi.getRegisterInfoByInvite({ invite: invite }).$promise\r\n                    .then(function(result) {\r\n                        if (result.message) {\r\n                            $scope.error = result.message;\r\n                            return $q.reject(\"Invite is invalid\");\r\n                        }\r\n                        $scope.newMember.companyName = result.companyName;\r\n                        $scope.newMember.email = result.email;\r\n                    });\r\n            });\r\n        }\r\n    };\r\n\r\n    $scope.register = function () {\r\n        $scope.error = null;\r\n\r\n        if (this.memberComponent.validate()) {\r\n            if ($scope.newMember.invite) {\r\n                $scope.loader.wrapLoading(function () {\r\n                    return corporateRegisterApi.registerByInvite({ invite: $scope.newMember.invite }, $scope.newMember, function (result) {\r\n                        $scope.complete = true;\r\n                        corporateApiErrorHelper.clearErrors($scope);\r\n                    }, function (rejection){\r\n                        corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                    }).$promise;\r\n                });\r\n            } else {\r\n                $scope.loader.wrapLoading(function() {\r\n                    return corporateRegisterApi.register($scope.newMember, function (result) {\r\n                        $scope.complete = true;\r\n                        corporateApiErrorHelper.clearErrors($scope);\r\n                    }, function (rejection){\r\n                        corporateApiErrorHelper.handleErrors($scope, rejection);\r\n                    }).$promise;\r\n                });\r\n            }\r\n        }\r\n    };\r\n}]);","angular.module('storefront.account')\r\n.component('vcAccountSubscriptions', {\r\n    templateUrl: \"themes/assets/js/account/account-subscriptions.tpl.liquid\",\r\n    $routeConfig: [\r\n     { path: '/', name: 'SubscriptionList', component: 'vcAccountSubscriptionsList', useAsDefault: true },\r\n     { path: '/:number', name: 'SubscriptionDetail', component: 'vcAccountSubscriptionDetail' }\r\n    ]\r\n})\r\n\r\n.component('vcAccountSubscriptionsList', {\r\n    templateUrl: \"account-subscriptions-list.tpl\",\r\n    controller: ['storefront.subscriptionApi', 'confirmService', 'loadingIndicatorService', '$translate', function (subscriptionApi, confirmService, loader, $translate) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n        $ctrl.pageSettings = { currentPage: 1, itemsPerPageCount: 5, numPages: 10 };\r\n        $ctrl.pageSettings.pageChanged = function () {\r\n            loader.wrapLoading(function () {\r\n                return subscriptionApi.search({\r\n                    pageNumber: $ctrl.pageSettings.currentPage,\r\n                    pageSize: $ctrl.pageSettings.itemsPerPageCount,\r\n                    sortInfos: $ctrl.sortInfos\r\n                }, function (data) {\r\n                    $ctrl.entries = data.results;\r\n                    $ctrl.pageSettings.totalItems = data.totalCount;\r\n                }).$promise;\r\n            });\r\n        };\r\n\r\n        this.$routerOnActivate = function (next) {\r\n            $ctrl.pageSettings.currentPage = next.params.pageNumber || $ctrl.pageSettings.currentPage;\r\n            $ctrl.pageSettings.pageChanged();\r\n        };\r\n    }]\r\n})\r\n\r\n.component('vcAccountSubscriptionDetail', {\r\n    templateUrl: \"account-subscription-detail.tpl\",\r\n    controller: ['storefront.subscriptionApi', 'confirmService', 'loadingIndicatorService', '$translate', function (subscriptionApi, confirmService, loader, $translate) {\r\n        var $ctrl = this;\r\n        $ctrl.loader = loader;\r\n\r\n        function refresh() {\r\n            loader.wrapLoading(function () {\r\n                return subscriptionApi.get({ number: $ctrl.entryNumber }, function (result) {\r\n                    $ctrl.subscription = angular.copy(result);\r\n                }).$promise;\r\n            });\r\n        }\r\n\r\n        this.$routerOnActivate = function (next) {\r\n            $ctrl.pageNumber = next.params.pageNumber || 1;\r\n            $ctrl.entryNumber = next.params.number;\r\n\r\n            refresh();\r\n        };\r\n\r\n        $ctrl.cancel = function () {\r\n            //var showDialog = function (text) {\r\n            //    confirmService.confirm(text).then(function (confirmed) {\r\n            //        if (confirmed) {\r\n            loader.wrapLoading(function () {\r\n                return subscriptionApi.cancel({ number: $ctrl.entryNumber }, { number: $ctrl.entryNumber, cancelReason: $ctrl.cancelReason }, function (result) {\r\n                    $ctrl.subscription = angular.copy(result);\r\n                    $ctrl.isCancelFormVisible = false;\r\n                }).$promise;\r\n            });\r\n            //        }\r\n            //    });\r\n            //};\r\n            //$translate('customer.subscription.cancel_confirmation').then(showDialog, showDialog);\r\n        };\r\n    }]\r\n})\r\n\r\n.filter('toIntervalKey', function () {\r\n    return function (data, data_intervalCount) {\r\n        var retVal = 'customer.subscriptions.intervals.' + data.interval.toLowerCase() + '_' + (data_intervalCount === 1 ? 1 : 'plural');\r\n        //var everyKey = 'customer.subscriptions.intervals.every';\r\n\r\n        //$translate([intervalKey, everyKey]).then(function (translations) {\r\n        //var intervalVal = translations[intervalKey];\r\n        //  var everyVal = translations[everyKey];\r\n\r\n        //if (data_intervalCount === 1) {\r\n        //    retVal = intervalKey;\r\n        //} else {\r\n        //    retVal = data_intervalCount + intervalVal;\r\n        //}\r\n        //});\r\n\r\n        return retVal;\r\n    };\r\n})\r\n;","angular.module('storefront.account')\r\n    .factory('storefront.accountApi', ['$resource', function ($resource) {\r\n        return $resource('storefrontapi/account', null, {\r\n            updateAccount: { url: 'storefrontapi/account', method: 'POST' },\r\n            changePassword: { url: 'storefrontapi/account/password', method: 'POST' },\r\n            getQuotes: { url: 'storefrontapi/account/quotes' },\r\n            updateAddresses: { url: 'storefrontapi/account/addresses', method: 'POST' },\r\n            getCountries: { url: 'storefrontapi/countries', isArray: true },\r\n            getCountryRegions: { url: 'storefrontapi/countries/:code3/regions', isArray: true }\r\n        });\r\n    }])\r\n    .factory('storefront.orderApi', ['$resource', function ($resource) {\r\n        return $resource('storefrontapi/orders/:number', null, {\r\n            search: { url: 'storefrontapi/orders/search', method: 'POST' },\r\n            getNewPaymentData: { url: 'storefrontapi/orders/:number/newpaymentdata' },\r\n            addOrUpdatePayment: { url: 'storefrontapi/orders/:number/payments', method: 'POST' },\r\n            processPayment: { url: 'storefrontapi/orders/:number/payments/:paymentNumber/process', method: 'POST' },\r\n            cancelPayment: { url: 'storefrontapi/orders/:number/payments/:paymentNumber/cancel', method: 'POST' }\r\n        });\r\n    }])\r\n    .factory('storefront.subscriptionApi', ['$resource', function ($resource) {\r\n        return $resource('storefrontapi/subscriptions/:number', null, {\r\n            search: { url: 'storefrontapi/subscriptions/search', method: 'POST' },\r\n            cancel: { url: 'storefrontapi/subscriptions/:number/cancel', method: 'POST' }\r\n        });\r\n    }]);","angular.module('storefront.account')\r\n.factory('storefront.corporateAccountApi', ['$resource', 'apiBaseUrl', function ($resource, apiBaseUrl) {\r\n    return $resource(apiBaseUrl + 'api/b2b/companyMembers', {}, {\r\n        getCompanyById: { url: apiBaseUrl + 'api/b2b/company/:id' },\r\n        updateCompany: { url: apiBaseUrl + 'api/b2b/company', method: 'POST' },\r\n\r\n        getCompanyMembers: { url: apiBaseUrl + 'api/b2b/companyMembers', method: 'POST' },\r\n        getCompanyMember: { url: apiBaseUrl + 'api/b2b/companyMember/:id' },\r\n        updateCompanyMember: { url: apiBaseUrl + 'api/b2b/companyMember', method: 'POST' },\r\n        deleteCompanyMember: { url: apiBaseUrl + 'api/b2b/companyMembers', method: 'DELETE' },\r\n\r\n        invite: { url: apiBaseUrl + 'api/b2b/invite', method: 'POST' },\r\n\r\n        getUser: { url: apiBaseUrl + 'api/b2b/users/:userName' },\r\n        updateUser: { url: apiBaseUrl + 'api/b2b/users', method: 'PUT' },\r\n        getRoles: { url: apiBaseUrl + 'api/b2b/roles', isArray: true }\r\n    });\r\n}])\r\n.factory('storefront.corporateRegisterApi', ['$resource', 'apiBaseUrl', function ($resource, apiBaseUrl) {\r\n    return $resource(apiBaseUrl + 'api/b2b/register', {}, {\r\n        register: { url: apiBaseUrl + 'api/b2b/register', method: 'POST' },\r\n        registerMember: { url: apiBaseUrl + 'api/b2b/registerMember', method: 'POST' },\r\n        getRegisterInfoByInvite: { url: apiBaseUrl + 'api/b2b/registerMember/:invite' },\r\n        registerByInvite: { url: apiBaseUrl + 'api/b2b/registerMember/:invite', method: 'POST' }\r\n    });\r\n}])\r\n.factory('storefront.corporateApiErrorHelper', ['$rootScope', function ($rootScope) {\r\n    return {\r\n        clearErrors: function($scope) {\r\n            $scope.errorMessage = null;\r\n            $scope.errors = null;\r\n        },\r\n        handleErrors: function ($scope, rejection) {\r\n            if (rejection.status == 400) {\r\n                $scope.errorMessage = rejection.data.message;\r\n                $scope.errors = rejection.data.modelState;\r\n                $rootScope.closeNotification();\r\n            }\r\n        }\r\n    };\r\n}]);"]}